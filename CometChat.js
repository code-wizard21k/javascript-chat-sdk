!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(n){var r={};function s(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}return s.m=n,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=21)}([function(t,e,n){"use strict";e.__esModule=!0;var r,s,o,i=n(5);e.constants={DEFAULT_STORE:"cometchat",MSG_VER_PRE:"store-ver-pre",MSG_VER_POST:"store-ver-post"},(r=e.GroupType||(e.GroupType={})).Public="public",r.Private="private",r.Protected="protected",r.Password="password",e.GROUP_TYPE={PUBLIC:"public",PRIVATE:"private",PROTECTED:"password",PASSWORD:"password"},(s=e.GroupMemberScope||(e.GroupMemberScope={})).Admin="admin",s.Moderator="moderator",s.Member="member",e.GROUP_MEMBER_SCOPE={ADMIN:"admin",MODERATOR:"moderator",PARTICIPANT:"participant"},e.XMPP={host:"encke.cometchat.com",port:7443,bind_url:"/ws/",deafult_password:"CometChat",jid_string:"[%s]%s@%s/%s",bare_jid_string:"[%s]%s@%s",username_string:"[%s]%s",muc_jid_string:"[%s]%s@%s.%s",xmpp_resource:"cometchat_js_sdk"+(new Date).getTime()},e.LOCAL_STORE={COMMON_STORE:"common_store",USERS_STORE:"users_store",MESSAGES_STORE:"messages_store",STORE_STRING:"%s:%s"},e.ResponseConstants={RESPONSE_KEYS:{KEY_DATA:"data",KEY_ACTION:"action",KEY_MESSAGE:"message",KEY_ERROR:"error",KEY_ERROR_DETAILS:"details",KEY_ERROR_CODE:"code",KEY_ERROR_MESSAGE:"message",KEY_AUTH_TOKEN:"authToken",KEY_WS_CHANNEL:"wsChannel",KEY_IDENTITY:"identity",KEY_SERVICE:"identity",KEY_ENTITIES:"entities",KEY_ENTITITY:"entity",CODE_REQUEST_OK:200,CODE_BAD_REQUEST:401}},e.MessageConstatnts={TYPE:{TEXT:"text",MEDIA:"media",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file"},CATEGORY:{MESSAGE:"message",ACTION:"action",CALL:"call"},RECEIVER_TYPE:{USER:"user",GROUP:"group"},KEYS:{ACTION:"action",TYPE:"type",DATA:"data",ID:"id",MUID:"muid",SENDER:"sender",RECEIVER:"receiver",CATEGORY:"category",RECEIVER_TYPE:"receiverType",SENT_AT:"sentAt",STATUS:"status",TEXT:"text",URL:"url",METADATA:"metadata"},PAGINATION:{AFFIX:{APPEND:"append",PREPEND:"prepend"},CURSOR_FILEDS:{ID:"id",SENT_AT:"sentAt"},CURSOR_AFFIX_DEFAULT:"prepend",CURSOR_FIELD_DEFAULT:"sentAt",KEYS:{PER_PAGE:"per_page",CURSOR_AFFIX:"cursorAffix",CURSOR_FIELD:"cursorField",CURSOR_VALUE:"cursorValue"}}},(o=e.MessageCategory||(e.MessageCategory={})).ACTION="action",o.MESSAGE="message",o.CALL="call",e.ActionConstatnts={ACTION_SUBJECTS:{ACTION_ON:"on",ACTION_BY:"by",ACTION_FOR:"for"},ACTION_ENTITY_TYPE:{GROUP_USER:"groupuser",USER:"user",GROUP:"group"},ACTION_KEYS:{ACTION_CREATED:"created",ACTION_UPDATED:"updated",ACTION_DELETED:"deleted",ENTITY:"entity",ENTITY_TYPE:"entityType",TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",ACTION_SCOPE_CHANGED:"scopeChanged",ACTION_TYPE_USER:"user",ACTION_TYPE_GROUP:"group",ACTION_TYPE_GROUP_MEMBER:"groupMember",ACTION_TYPE_CALL:"call"},ActionMessages:{ACTION_GROUP_JOINED_MESSAGE:"%s joined %s",ACTION_GROUP_LEFT_MESSAGE:"%s left %s",ACTION_MEMBER_KICKED_MESSAGE:"%s kicked %s from %s",ACTION_MEMBER_BANNED_MESSAGE:"%s banned %s from %s",ACTION_MEMBER_UNBANNED_MESSAGE:"%s unbanned %s from %s",ACTION_MEMBER_INVITED_MESSAGE:"%s banned %s from %s"},ACTION_TYPE:{TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",TYPE_MEMBER_SCOPE_CHANGED:"scopeChanged"},ACTIONS:{MEMBER_JOINED:"joined",MEMBER_LEFT:"left",MEMBER_KICKED:"kicked",MEMBER_BANNED:"banned",MEMBER_UNBANNED:"unbanned",MEMBER_INVITED:"invited",MEMBER_SCOPE_CHANGED:"scopeChanged"}},e.CallConstants={CALL_TYPE_AUDIO:"audio",CALL_TYPE_VIDEO:"video",CALL_TYPE:{AUDIO:"audio",VIDEO:"video"},RECEIVER_TYPE_GROUP:"group",RECEIVER_TYPE_USER:"user",CALL_KEYS:{CALL_DATA:"data",CALL_ID:"id",CALL_SESSION_ID:"sessionid",CALL_RECEIVER:"receiver",CALL_SENDER:"sender",CALL_RECEIVER_TYPE:"receiverType",CALL_STATUS:"status",CALL_TYPE:"type",CALL_INITIATED_AT:"initiatedAt",CALL_METADATA:"metadata",CALL_ENTITIES:"entities",CALL_ENTITY_TYPE:"entityType",CALL_ENTITY:"entity",CALL_ENTITY_USER:"user",CALL_ENTITY_GROUP:"group"},CALL_STATUS:{INITIATED:"initiated",ONGOING:"ongoing",UNANSWERED:"unanswered",REJECTED:"rejected",BUSY:"busy",CANCELLED:"cancelled",ENDED:"ended"}},e.GroupConstants={KEYS:{NAME:"name",GUID:"guid",TYPE:"type",PASSWORD:"password",ICON:"icon",DESCRIPTION:"description",OWNER:"owner",METADATA:"metadata",CREATED_AT:"createdAt",UPDATED_AT:"updatedAt",HAS_JOINED:"hasJoined",WS_CHANNEL:"wsChannel"}},e.GroupMemersConstans={UID:"uid",GUID:"guid",USER:"user"},e.UserConstants={UID:"uid",NAME:"name",AUTH_TOKEN:"authToken",AVATAR:"avatar",CREDITS:"credits",EMAIL:"email",LAST_ACTIVE_AT:"lastActiveAt",LINK:"link",META_DATA:"metaData",ROLE:"role",STATUS:"status",STATUS_MESSAGE:"statusMessage",USER_NAME:"user_name"},e.Errors={ERROR_IO_EXCEPTION:"ERROR_IO_EXCEPTION",ERROR_JSON_EXCEPTION:"ERROR_JSON_EXCEPTION",ERROR_PASSWORD_MISSING:"ERROR_PASSWORD_MISSING",ERROR_LIMIT_EXCEEDED:"ERROR_LIMIT_EXCEEDED",ERROR_USER_NOT_LOGGED_IN:"ERROR_USER_NOT_LOGGED_IN",ERROR_INVALID_GUID:"ERROR_INVALID_GUID",ERROR_PASSWORD_MISSING_MESSAGE:"Password is mandatory for a password group",ERROR_LIMIT_EXCEEDED_MESSAGE:"Limit Exceeded Max limit of %s",ERROR_USER_NOT_LOGGED_IN_MESSAGE:"Please log in to CometChat before calling this method",ERROR_INVALID_GUID_MESSAGE:"Please provide a valid GUID",ERROR_DEFAULT_MESSAGE:"Something went wrong"},e.CALL_ERROR={CALL_ALREADY_INITIATED:{code:"CALL_ALREADY_INITIATED",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}},ERROR_IN_CALLING:{code:"CALL_IN_PROGRESS",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}}},e.PARAMETER_ERROR={PARAMETER_REQUIRED:{code:"%s_NOT_PROVIDED",name:"%s_NOT_PROVIDED",message:"please provide the %s",details:{}}},e.GroupErrors={NOT_A_GROUP:new i.CometChatException({code:"NOT_A_GROUP",message:"Please use group class to construct a new group"})},e.PresenceConstatnts={XMPP_KEYS:{FROM:"from",STATUS:"status",LAST_ACTIVE_AT:"lastActiveAt",TYPE:"type"},STATUS:{ONLINE:"online",OFFLINE:"offline",JOINED:"JOINED",LEFT:"LEFT"}},e.APP_SETTINGS={APP_SETTINGS:"app_settings",KEYS:{XMPP_HOST:"XMPP_HOST",XMPP_USE_SSL:"XMPP_USE_SSL",GROUP_SERVICE:"GROUP_SERVICE",CALL_SERVICE:"CALL_SERVICE",XMPP_WS_PORT:"XMPP_WS_PORT",XMPP_WSS_PORT:"XMPP_WSS_PORT",XMPP_HTTP_BIND_PORT:"XMPP_HTTP_BIND_PORT",XMPP_HTTPS_BIND_PORT:"XMPP_HTTPS_BIND_PORT",WEBRTC_HOST:"WEBRTC_HOST",WEBRTC_USE_SSL:"WEBRTC_USE_SSL",WEBRTC_WS_PORT:"WEBRTC_WS_PORT",WEBRTC_WSS_PORT:"WEBRTC_WSS_PORT",WEBRTC_HTTP_BIND_PORT:"WEBRTC_HTTP_BIND_PORT",WEBRTC_HTTPS_BIND_PORT:"WEBRTC_HTTPS_BIND_PORT"}}},function(t,e,n){"use strict";e.__esModule=!0,e.isObject=function(t){return t instanceof Object&&t.constructor===Object},e.isTruthy=function(t){return[!0,1,"1","true","TRUE"].includes(t)},e.isFalsy=function(t){return null!=t&&("string"==typeof t&&(t=t.trim()),"object"==typeof t&&0===Object.keys(t).length&&(t=void 0)),["",0,"0",!1,null,"null",void 0,"undefined"].includes(t)},e.getOrdinalSuffix=function(t){var e=t%10,n=t%100;return 1==e&&11!=n?t+"st":2==e&&12!=n?t+"nd":3==e&&13!=n?t+"rd":t+"th"},e.format=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t.split("%s").reduce(function(t,e,n){return t+e+(r[n]||"")},"")},e.createUidFromJid=function(t){return t.substring(t.lastIndexOf("]")+1,t.lastIndexOf("@"))};var r=function(){function t(){}return t.log=function(t,e){},t.error=function(t,e){},t.info=function(t,e){},t}();e.Logger=r},function(t,e,n){"use strict";e.__esModule=!0;var r=n(23),a=n(1),u=n(5),c=n(4),d=n(3),o=n(15),l=n(7),s=n(6),h=n(18),f=n(17),p=n(16),_=n(11),g=n(25),m=n(0),E=n(13),C=n(26),S=n(27),A=n(8),T=n(14),v=n(20),y=n(40),I=n(12),N=n(28),b=n(22),O=n(29),R=n(21),M=n(30),L=o.XMPPConnectionHelper.getInstance(),i=function(){function i(t){i.appId=t,i.messagesStore=_.MessagesStore.getInstance(),i.localStorage=s.LocalStorage.getInstance(),i.userStore=S.UserStore.getInstance()}return i.setAuthToken=function(t){i.authToken=t},i.prototype.getAuthToken=function(){return i.authToken},i.getAppId=function(){return i.appId},i.prototype.getApiKey=function(){return i.apiKey},i.init=function(n){var r=this;return new Promise(function(t,e){a.isFalsy(n)?e(new u.CometChatException(y.INIT_ERROR.NO_APP_ID)):r.getInstance(n),t(!0)})},i.getInstance=function(t){return this.cometChat||(this.cometChat=new i(t)),this.cometChat},i.login=function(){for(var s=this,o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return new Promise(function(n,r){if(!a.isFalsy(s.getAppId()))return i.localStorage.get("user").then(function(e){if(2!=o.length)return i.authToken=o[0],i.isSecure=!0,s.getLoggedinUser().then(function(t){null!=e&&e.uid!==t.uid?i.messagesStore.clearStore().then(function(){i.userStore.clearStore().then(function(){i.localStorage.clearStore().then(function(){(i.user=new d.Me(t)).setAuthToken(o[0]),i.setAuthToken(o[0]),i.XMPPLogin(i.user,n,r)})})}):(s.user=new d.Me(t),s.user.setAuthToken(o[0]),s.setAuthToken(o[0]),s.XMPPLogin(s.user,n,r))},function(t){r(new u.CometChatException(t.error))});i.isSecure=!1,i.apiKey=o[1];var t=o[0];null!=e&&e.uid!==o[0]?s.messagesStore.clearStore().then(function(){i.userStore.clearStore().then(function(){i.localStorage.clearStore().then(function(){i.generateAuthToken(t).then(function(t){i.user=new d.Me(t),i.setAuthToken(i.user.getAuthToken()),i.getLoggedinUser().then(function(t){(i.user=new d.Me(t)).setAuthToken(i.authToken),i.setAuthToken(i.user.getAuthToken()),i.XMPPLogin(i.user,n,r)},function(t){r(new u.CometChatException(t.error))})},function(t){r(new u.CometChatException(t.error))})})})}):a.isFalsy(i.authToken)?a.isFalsy(t)||(a.isFalsy(i.apiKey)?r(new u.CometChatException(y.LOGIN_ERROR.UNAUTHORISED)):s.generateAuthToken(t).then(function(t){s.user=new d.Me(t),s.setAuthToken(i.user.getAuthToken()),s.getLoggedinUser().then(function(t){s.user=new d.Me(t),s.user.setAuthToken(i.authToken),s.setAuthToken(s.user.getAuthToken()),s.XMPPLogin(s.user,n,r)},function(t){r(new u.CometChatException(t.error))})},function(t){r(new u.CometChatException(t.error))})):s.XMPPLogin(s.user,n,r)});r(new u.CometChatException(y.LOGIN_ERROR.NOT_INITIALIZED))})},i.sendMessage=function(t){var r=this;return new Promise(function(e,n){return c.makeApiCall("sendMessage",{},t,t instanceof h.MediaMessage).then(function(t){r.messagesStore.storeMessages([p.MessageController.trasformJSONMessge(t.data)]),e(p.MessageController.trasformJSONMessge(t.data))},function(t){n(new u.CometChatException(t.error))})})},i.sendMediaMessage=function(t){var r=this;return new Promise(function(e,n){return c.makeApiCall("sendMessage",{},t,!0).then(function(t){r.messagesStore.storeMessages([p.MessageController.trasformJSONMessge(t.data)]),e(p.MessageController.trasformJSONMessge(t.data))},function(t){n(new u.CometChatException(t.error))})})},i.getPreviousMessagesByTimestamp=function(t,r){return new Promise(function(e,n){a.isFalsy(r)?n(new u.CometChatException(JSON.parse(a.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED),"TIMESTAMP","TIMESTAMP","timestamp")))):p.MessageController.getAllMessage(t,r,m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.SENT_AT,m.MessageConstatnts.PAGINATION.AFFIX.PREPEND).then(function(t){return e(t)},function(t){return n(t)})})},i.getPreviousMessagesById=function(t,r){return new Promise(function(e,n){a.isFalsy(r)?n(new u.CometChatException(JSON.parse(a.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED),"ID","ID","id")))):p.MessageController.getAllMessage(t,r,m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID,m.MessageConstatnts.PAGINATION.AFFIX.PREPEND).then(function(t){return e(t)},function(t){return n(t)})})},i.getNextMessagesByTimestamp=function(t,r){return new Promise(function(e,n){a.isFalsy(r)?n(new u.CometChatException(JSON.parse(a.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED),"TIMESTAMP","TIMESTAMP","timestamp")))):p.MessageController.getAllMessage(t,r,m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.SENT_AT,m.MessageConstatnts.PAGINATION.AFFIX.APPEND).then(function(t){return e(t)},function(t){return n(t)})})},i.getNextMessagesById=function(t,r){return new Promise(function(e,n){a.isFalsy(r)?n(new u.CometChatException(JSON.parse(a.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED),"ID","ID","id")))):p.MessageController.getAllMessage(t,r,m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID,m.MessageConstatnts.PAGINATION.AFFIX.APPEND).then(function(t){return e(t)},function(t){return n(t)})})},i.getUser=function(t){return new Promise(function(s,e){c.makeApiCall("user",{uid:t}).then(function(t){var r=g.UsersController.trasformJSONUser(t.data),e=[];e.push(a.format(m.XMPP.username_string,i.getAppId(),t.data[m.UserConstants.UID])),o.XMPPConnectionHelper.getInstance().getPresenceInfo(e,function(n){e.map(function(t,e){r.setLastActiveAt(n[e].getLastActiveAt()),r.setStatus(n[e].getStatus()),s(r)})})}).catch(function(t){e(new u.CometChatException(t.error))})})},i.getLoggedinUser=function(){return new Promise(function(e,n){c.makeApiCall("getMyDetails").then(function(t){e(t.data)}).catch(function(t){n(t)})})},i.createGroup=function(r){return new Promise(function(e,n){r instanceof E.Group||n(new u.CometChatException(m.GroupErrors.NOT_A_GROUP)),c.makeApiCall("createGroup",{},r).then(function(t){L.joinMuc(r),e(C.GroupsController.trasformJSONGroup(t.data))},function(t){n(new u.CometChatException(t.error))})})},i.getGroup=function(t){return new Promise(function(e,n){c.makeApiCall("getGroup",{guid:t}).then(function(t){e(C.GroupsController.trasformJSONGroup(t.data))},function(t){n(new u.CometChatException(t.error))})})},i.joinGroup=function(t,s,o){return new Promise(function(e,n){var r;r=a.isFalsy(o)?new E.Group(t,"name",s):new E.Group(t,"",s,o),c.makeApiCall("joinGroup",r,r).then(function(t){L.joinMuc(r),e(C.GroupsController.trasformJSONGroup(t.data[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA][m.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][m.ActionConstatnts.ACTION_KEYS.ENTITY]))},function(t){n(new u.CometChatException(t.error))})})},i.updateGroup=function(t){return new Promise(function(e,n){t instanceof E.Group||n(new u.CometChatException({message:"No such Group present"})),c.makeApiCall("updateGroup",t,t).then(function(t){e(C.GroupsController.trasformJSONGroup(t.data))},function(t){n(new u.CometChatException(t.error))})})},i.deleteGroup=function(t){return new Promise(function(e,n){c.makeApiCall("deleteGroup",{guid:t}).then(function(t){e(!0)},function(t){n(new u.CometChatException(t.error))})})},i.leaveGroup=function(r){return new Promise(function(e,n){c.makeApiCall("leaveGroup",{guid:r}).then(function(t){L.leaveMuc(r),_.MessagesStore.getInstance().storeMessages([p.MessageController.trasformJSONMessge(t.data)]),e(!0)},function(t){n(new u.CometChatException(t.error))})})},i.kickGroupMember=function(t,r){return new Promise(function(e,n){c.makeApiCall("kickGroupMembers",{guid:t,uid:r}).then(function(t){_.MessagesStore.getInstance().storeMessages([p.MessageController.trasformJSONMessge(t.data)]),e(!0)},function(t){n(new u.CometChatException(t.error))})})},i.updateGroupMemberScope=function(t,r,s){return new Promise(function(e,n){c.makeApiCall("changeScopeOfMember",{guid:t,uid:r},{scope:s}).then(function(t){_.MessagesStore.getInstance().storeMessages([p.MessageController.trasformJSONMessge(t.data)]),e(!0)},function(t){n(new u.CometChatException(t.error))})})},i.banGroupMember=function(t,r){return new Promise(function(e,n){c.makeApiCall("banGroupMember",{guid:t,uid:r}).then(function(t){_.MessagesStore.getInstance().storeMessages([p.MessageController.trasformJSONMessge(t.data)]),e(!0)},function(t){n(new u.CometChatException(t.error))})})},i.unbanGroupMember=function(t,r){return new Promise(function(e,n){c.makeApiCall("unbanGroupMember",{guid:t,uid:r}).then(function(t){_.MessagesStore.getInstance().storeMessages([p.MessageController.trasformJSONMessge(t.data)]),e(!0)},function(t){n(new u.CometChatException(t.error))})})},i.initiateCall=function(e){return new Promise(function(n,r){a.isFalsy(JSON.parse(JSON.stringify(e)).sender)?a.isFalsy(v.CallController.getInstance().getActiveCall())?(e.setStatus(m.CallConstants.CALL_STATUS.INITIATED),c.makeApiCall("createCallSession",{},e).then(function(e){var t=T.Call.callFromJSON(e[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);v.CallController.getInstance().initiateCall(t).then(function(t){_.MessagesStore.getInstance().storeMessages([t]),n(Object.assign(t,e[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]))}).catch(function(t){r(t)})},function(t){r(new u.CometChatException(t.error))})):r(new u.CometChatException(m.CALL_ERROR.ERROR_IN_CALLING)):v.CallController.getInstance().initiateCall(e).then(function(t){n(Object.assign(e))}).catch(function(t){r(t)})})},i.acceptCall=function(r){return new Promise(function(n,e){var t={};t[m.CallConstants.CALL_KEYS.CALL_STATUS]=m.CallConstants.CALL_STATUS.ONGOING,c.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=T.Call.callFromJSON(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);v.CallController.getInstance().onCallStarted(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])),_.MessagesStore.getInstance().storeMessages([Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])]),n(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]))},function(t){e(new u.CometChatException(t.error))})})},i.rejectCall=function(t,e){switch(e){case m.CallConstants.CALL_STATUS.REJECTED:return this.rejectIncomingCall(t);case m.CallConstants.CALL_STATUS.CANCELLED:return this.cancelCall(t);case m.CallConstants.CALL_STATUS.BUSY:return this.sendBusyResponse(t);default:a.Logger.log("Default case",e)}},i.endCall=function(r){return new Promise(function(n,t){var e={};e[m.CallConstants.CALL_KEYS.CALL_STATUS]=m.CallConstants.CALL_STATUS.ENDED,c.makeApiCall("updateCallSession",{sessionid:r},e).then(function(t){a.Logger.log("calling Log",{response:t});var e=T.Call.callFromJSON(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);_.MessagesStore.getInstance().storeMessages([Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])]),v.CallController.getInstance().endCall(),n(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]))},function(t){a.Logger.log("calling Log",{error:t});var e=v.CallController.getInstance().getActiveCall();e.setStatus(m.CallConstants.CALL_STATUS.ENDED),_.MessagesStore.getInstance().storeMessages(e),n(e),v.CallController.getInstance().endCall()})})},i.getActiveCall=function(){return v.CallController.getInstance().getActiveCall()},i.startCall=function(t,e,n){v.CallController.getInstance().startCall(e,n)},i.rejectIncomingCall=function(r){return new Promise(function(n,e){var t={};t[m.CallConstants.CALL_KEYS.CALL_STATUS]=m.CallConstants.CALL_STATUS.REJECTED,c.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=T.Call.callFromJSON(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);_.MessagesStore.getInstance().storeMessages([Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])]),n(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]))},function(t){e(new u.CometChatException(t.error))})})},i.cancelCall=function(r){return new Promise(function(n,e){var t={};t[m.CallConstants.CALL_KEYS.CALL_STATUS]=m.CallConstants.CALL_STATUS.CANCELLED,c.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=T.Call.callFromJSON(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);_.MessagesStore.getInstance().storeMessages([Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])]),v.CallController.getInstance().endCallSession(),n(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]))},function(t){e(new u.CometChatException(t.error))})})},i.sendBusyResponse=function(r){return new Promise(function(n,e){var t={};t[m.CallConstants.CALL_KEYS.CALL_STATUS]=m.CallConstants.CALL_STATUS.BUSY,c.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=T.Call.callFromJSON(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);_.MessagesStore.getInstance().storeMessages([Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])]),n(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]))},function(t){e(new u.CometChatException(t.error))})})},i.sendUnansweredResponse=function(r){return new Promise(function(n,e){var t={};t[m.CallConstants.CALL_KEYS.CALL_STATUS]=m.CallConstants.CALL_STATUS.UNANSWERED,c.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=T.Call.callFromJSON(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);o.XMPPConnectionHelper.getInstance().trigerMessageHandler(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])),_.MessagesStore.getInstance().storeMessages([Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])]),n(Object.assign(e,t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]))},function(t){e(new u.CometChatException(t.error))})})},i.addMessageListener=function(t,e){L.addMessageEventListener(t,e)},i.removeMessageListener=function(t){L.removeMessageEventListener(t)},i.addCallListener=function(t,e){L.addCallEventListener(t,e)},i.removeCallListener=function(t){L.removeCallEventListener(t)},i.addUserListener=function(t,e){L.addUserEventListener(t,e)},i.removeUserListener=function(t){L.removeUserEventListener(t)},i.addGroupListener=function(t,e){L.addGroupEventListener(t,e)},i.removeGroupListener=function(t){L.removeGroupEventListener(t)},i.generateAuthToken=function(t){return new Promise(function(e,n){c.makeApiCall("authToken",{uid:t}).then(function(t){e(t.data)}).catch(function(t){n(new u.CometChatException(t.error))})})},i.XMPPLogin=function(e,n,r){var s=this,o=!0;L.XMMPLogin(e.getUid(),e.getWsChannel().secret,function(t){switch(t){case l.Strophe.Status.CONNFAIL:return r(new u.CometChatException(y.LOGIN_ERROR.XMPP_CONNECTION_FAIL)),s.getAppSettings().then(function(t){});case l.Strophe.Status.CONNECTED:s.localStorage.set("user",e),s.messagesStore.get(m.constants.MSG_VER_POST).then(function(t){null==t&&(t=0),p.MessageController.getOfflineHistory(1e3,t)}),n(new d.User(e));break;case l.Strophe.Status.DISCONNECTED:o&&s.XMPPLogin(e,n,r);break;case l.Strophe.Status.DISCONNECTING:o=!1,a.Logger.info("Connection","Disconnecting");break;case l.Strophe.Status.AUTHFAIL:r(new u.CometChatException(y.LOGIN_ERROR.XMPP_CONNECTION_FAIL))}})},i.getAppSettings=function(){return new Promise(function(e,n){c.makeApiCall("appSettings").then(function(t){s.LocalStorage.getInstance().set("app_settings",t.data),e(t.data)},function(t){n(new u.CometChatException(t.error))})})},i.logout=function(){var r=this;return new Promise(function(e,n){c.makeApiCall("userLogout").then(function(t){o.XMPPConnectionHelper.getInstance().XMPPDisconnect(),r.clearCache(),r.apiKey=void 0,r.user=void 0,r.authToken=void 0,e(t.data)},function(t){n(new u.CometChatException(t.error))})})},i.clearCache=function(){this.messagesStore.clearStore(),this.userStore.clearStore(),this.localStorage.clearStore()},i.TextMessage=f.TextMessage,i.MediaMessage=h.MediaMessage,i.Action=I.Action,i.Call=T.Call,i.Group=E.Group,i.AppUser=d.User,i.UserMessagesRequest=N.MessagesRequest,i.UserMessagesRequestBuilder=N.DefaultMessagesRequestBuilder,i.GroupMessagesRequest=N.MessagesRequest,i.GroupMessagesRequestBuilder=N.DefaultGroupMessagesRequestBuilder,i.MessagesRequest=N.MessagesRequest,i.MessagesRequestBuilder=N.DefaultMessagesRequestBuilder,i.UsersRequest=b.UsersRequest,i.UsersRequestBuilder=b.UsersRequestBuilder,i.GroupsRequest=O.GroupsRequest,i.GroupsRequestBuilder=O.GroupsRequestBuilder,i.GroupMembersRequest=R.GroupMembersRequest,i.GroupMembersRequestBuilder=M.GroupMembersRequestBuilder,i.BannedMembersRequest=R.GroupMembersRequest,i.BannedMembersRequestBuilder=M.GroupOutCastMembersRequestBuilder,i.MessageListener=A.MessageEventListener,i.UserListener=A.UserEventListener,i.GroupListener=A.GroupEventListener,i.OngoingCallListener=A.UserCallEventListener,i.CallListener=A.CallEventListener,i.MESSAGE_TYPE=m.MessageConstatnts.TYPE,i.CATEGORY_MESSAGE=m.MessageConstatnts.CATEGORY.MESSAGE,i.CATEGORY_ACTION=m.MessageConstatnts.CATEGORY.ACTION,i.CATEGORY_CALL=m.MessageConstatnts.CATEGORY.CALL,i.ACTION_TYPE=m.ActionConstatnts.ACTIONS,i.CALL_TYPE=m.CallConstants.CALL_TYPE,i.RECEIVER_TYPE=m.MessageConstatnts.RECEIVER_TYPE,i.CALL_STATUS=m.CallConstants.CALL_STATUS,i.CallController=v.CallController,i.GROUP_MEMBER_SCOPE=R.GROUP_MEMBER_SCOPE,i.GROUP_TYPE=R.GROUP_TYPE,i.MESSAGE_REQUEST=m.MessageConstatnts.PAGINATION.CURSOR_FILEDS,i.isCall=!1,i.endpointFactory=new r.EndpointFactory,i}();e.CometChat=i},function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var o=function(){function t(t){this.uid=t.uid,this.name=t.name,this.authToken=t.authToken,this.avatar=t.avatar,this.credits=t.credits,this.email=t.email,this.lastActiveAt=t.lastActiveAt,this.link=t.link,this.metadata=t.metadata,this.role=t.role,this.status=t.status,this.statusMessage=t.statusMessage}return t.prototype.getUid=function(){return this.uid},t.prototype.setUid=function(t){this.uid=t},t.prototype.getName=function(){return this.name},t.prototype.setName=function(t){this.name=t},t.prototype.getAuthToken=function(){return this.authToken},t.prototype.setAuthToken=function(t){this.authToken=t},t.prototype.getAvatar=function(){return this.avatar},t.prototype.setAvatar=function(t){this.avatar=t},t.prototype.getCredits=function(){return this.credits},t.prototype.setCredits=function(t){this.credits=t},t.prototype.getEmail=function(){return this.email},t.prototype.setEmail=function(t){this.email=t},t.prototype.getLastActiveAt=function(){return this.lastActiveAt},t.prototype.setLastActiveAt=function(t){this.lastActiveAt=t},t.prototype.getLink=function(){return this.link},t.prototype.setLink=function(t){return this.link=t},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(t){this.metadata=t},t.prototype.getRole=function(){return this.role},t.prototype.setRole=function(t){this.role=t},t.prototype.getStatus=function(){return this.status},t.prototype.setStatus=function(t){this.status=t},t.prototype.getStatusMessage=function(){return this.statusMessage},t.prototype.setStatusMessage=function(t){this.statusMessage=t},t}(),i=function(n){function t(t){var e=n.call(this,t)||this;return e.wsChannel=t.wsChannel,e}return s(t,n),t.prototype.getWsChannel=function(){return this.wsChannel},t}(e.User=o);e.Me=i},function(t,e,n){"use strict";e.__esModule=!0;var u=n(31),c=n(2),i=n(1);function d(e,t,n,r,s){var o;return void 0===e&&(e=""),void 0===t&&(t="GET"),void 0===n&&(n={}),void 0===r&&(r={}),n=i.isFalsy(n)?void 0:("GET"==t&&(e+="?",Object.keys(n).map(function(t){e=e+t+"="+n[t]+"&"}),n=void 0),s&&(o=new FormData(this),Object.keys(n).map(function(t){n[t]instanceof Object&&!(n[t]instanceof File)?o.set(t,JSON.stringify(n[t])):o.set(t,n[t])})),JSON.stringify(n)),fetch(e,{method:t,mode:"cors",cache:"no-cache",headers:r,redirect:"follow",referrer:"no-referrer",body:s?o:n})}e.makeApiCall=function(s,t,o,i){void 0===s&&(s=""),void 0===t&&(t={}),void 0===o&&(o={});var a=c.CometChat.getInstance();return new Promise(function(n,r){u.getEndPoint(s,t).then(function(t){var e={appId:c.CometChat.getAppId(),Accept:"application/json"};i||(e["Content-Type"]="application/json"),t.hasOwnProperty("isAdminApi")&&t.isAdminApi?a.getApiKey()?e.apiKey=a.getApiKey():r({error:"An apiKey is need to use the "+s+" api."}):a.getAuthToken()?e.authToken=a.getAuthToken():r({error:{code:"USER_NOT_LOGED_IN",message:"An authToken is need to use the "+s+" api.",name:"user not logged in"}}),d(t.endpoint,t.method,o,e,i).then(function(t){return t.json()}).then(function(t){t.hasOwnProperty("data")?(t.data.hasOwnProperty("authToken")&&c.CometChat.setAuthToken(t.data.authToken),n(t)):r(t)}).catch(function(t){return r})}).catch(function(t){return r})})},e.makeAdminApiCall=function(s,t,o,i){void 0===s&&(s=""),void 0===t&&(t={}),void 0===o&&(o={});var a=c.CometChat.getInstance();return new Promise(function(n,r){u.getEndPoint(s,t).then(function(t){var e={appId:c.CometChat.getAppId(),Accept:"application/json"};i||(e["Content-Type"]="application/json"),t.hasOwnProperty("isAdminApi")&&t.isAdminApi?a.getApiKey()?e.apiKey=a.getApiKey():r({error:"An apiKey is need to use the "+s+" api."}):a.getAuthToken()?e.authToken=a.getAuthToken():r({error:"An authToken is need to use the "+s+" api."}),d(t.endpoint,t.method,o,e,i).then(function(t){return t.json()}).then(function(t){t.hasOwnProperty("data")?(t.data.hasOwnProperty("authToken")&&c.CometChat.setAuthToken(t.data.authToken),n(t)):r(t)}).catch(function(t){return r})}).catch(function(t){return r})})},e.postData=d},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){this.code=t.code,this.name=t.name,this.message=t.message,this.details=t.details};e.CometChatException=r},function(t,e,n){"use strict";e.__esModule=!0;var r=n(1),s=n(0),o=n(19),i=n(2),a=function(){function t(t){this.store=s.constants.DEFAULT_STORE,r.isFalsy(t)||(this.store=t),this.localStore=o.createInstance({name:r.format(s.LOCAL_STORE.STORE_STRING,i.CometChat.getAppId(),s.LOCAL_STORE.COMMON_STORE)}),this.localStore.setDriver([o.LOCALSTORAGE,o.INDEXEDDB,o.WEBSQL])}return t.getInstance=function(){return null==t.localStorage&&(t.localStorage=new t),t.localStorage},t.prototype.set=function(t,e){return this.localStore.setItem(t,e)},t.prototype.remove=function(t){this.localStore.removeItem(t)},t.prototype.get=function(t){return this.localStore.getItem(t)},t.prototype.clearStore=function(){return this.localStore.clear()},t.prototype.clear=function(t){},t.prototype.selectStore=function(t){this.store=t},t.localStorage=null,t}();e.LocalStorage=a},function(t,e,n){var r;window,r=function(){return function(n){var r={};function s(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}return s.m=n,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s="./src/strophe.js")}({"./src/bosh.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core.js"),l=r.default.Strophe,s=r.default.$build;l.Request=function(t,e,n,r){this.id=++l._requestId,this.xmlData=t,this.data=l.serialize(t),this.origFunc=e,this.func=e,this.rid=n,this.date=NaN,this.sends=r||0,this.abort=!1,this.dead=null,this.age=function(){return this.date?(new Date-this.date)/1e3:0},this.timeDead=function(){return this.dead?(new Date-this.dead)/1e3:0},this.xhr=this._newXHR()},l.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if("parsererror"===(t=this.xhr.responseXML.documentElement).tagName)throw l.error("invalid response received"),l.error("responseText: "+this.xhr.responseText),l.error("responseXML: "+l.serialize(this.xhr.responseXML)),new Error("parsererror")}else if(this.xhr.responseText){if(l.debug("Got responseText but no responseXML; attempting to parse it with DOMParser..."),!(t=(new DOMParser).parseFromString(this.xhr.responseText,"application/xml").documentElement))throw new Error("Parsing produced null node");if(t.querySelector("parsererror")){l.error("invalid response received: "+t.querySelector("parsererror").textContent),l.error("responseText: "+this.xhr.responseText);var e=new Error;throw e.name=l.ErrorCondition.BAD_FORMAT,e}}return t},_newXHR:function(){var t=null;return window.XMLHttpRequest?(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType("text/xml; charset=utf-8"):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t.onreadystatechange=this.func.bind(null,this),t}},l.Bosh=function(t){this._conn=t,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.lastResponseHeaders=null,this._requests=[]},l.Bosh.prototype={strip:null,_buildBody:function(){var t=s("body",{rid:this.rid++,xmlns:l.NS.HTTPBIND});return null!==this.sid&&t.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),t},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(t,e,n){this.wait=t||this.wait,this.hold=e||this.hold,this.errors=0;var r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":l.NS.BOSH});n&&r.attrs({route:n});var s=this._conn._connect_cb;this._requests.push(new l.Request(r.tree(),this._onRequestStateChange.bind(this,s.bind(this._conn)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(t,e,n,r,s,o,i){this._conn.jid=t,this.sid=e,this.rid=n,this._conn.connect_callback=r,this._conn.domain=l.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=s||this.wait,this.hold=o||this.hold,this.window=i||this.window,this._conn._changeConnectStatus(l.Status.ATTACHED,null)},_restore:function(t,e,n,r,s){var o=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!(null!=o&&o.rid&&o.sid&&o.jid&&(null==t||l.getBareJidFromJid(o.jid)===l.getBareJidFromJid(t)||null===l.getNodeFromJid(t)&&l.getDomainFromJid(o.jid)===t))){var i=new Error("_restore: no restoreable session.");throw i.name="StropheSessionError",i}this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,e,n,r,s)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(t){var e=t.getAttribute("type");if(null!==e&&"terminate"===e){var n=t.getAttribute("condition");l.error("BOSH-Connection failed: "+n);var r=t.getElementsByTagName("conflict");return null!==n?("remote-stream-error"===n&&0<r.length&&(n="conflict"),this._conn._changeConnectStatus(l.Status.CONNFAIL,n)):this._conn._changeConnectStatus(l.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),l.Status.CONNFAIL}this.sid||(this.sid=t.getAttribute("sid"));var s=t.getAttribute("requests");s&&(this.window=parseInt(s,10));var o=t.getAttribute("hold");o&&(this.hold=parseInt(o,10));var i=t.getAttribute("wait");i&&(this.wait=parseInt(i,10));var a=t.getAttribute("inactivity");a&&(this.inactivity=parseInt(a,10))},_disconnect:function(t){this._sendTerminate(t)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(t){var e=this._getRequestStatus(t),n=this._conn.protocolErrorHandlers.HTTP[e];n&&n.call(this,e)},_hitError:function(t){this.errors++,l.warn("request errored, status: "+t+", number of errors: "+this.errors),4<this.errors&&this._conn._onDisconnectTimeout()},_no_auth_received:function(t){l.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),t=t?t.bind(this._conn):this._conn._connect_cb.bind(this._conn);var e=this._buildBody();this._requests.push(new l.Request(e.tree(),this._onRequestStateChange.bind(this,t),e.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(;0<this._requests.length;){var t=this._requests.pop();t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){}}},_onIdle:function(){var t=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===t.length&&!this._conn.disconnecting&&(l.info("no requests during idle cycle, sending blank request"),t.push(null)),!this._conn.paused){if(this._requests.length<2&&0<t.length){for(var e=this._buildBody(),n=0;n<t.length;n++)null!==t[n]&&("restart"===t[n]?e.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":l.NS.BOSH}):e.cnode(t[n]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new l.Request(e.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),e.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(0<this._requests.length){var r=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(l.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),r>Math.floor(l.TIMEOUT*this.wait)&&(l.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(l.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(t,e){var n;if(4===t.xhr.readyState)try{n=t.xhr.status}catch(t){l.error("Caught an error while retrieving a request's status, reqStatus: "+n)}return void 0===n&&(n="number"==typeof e?e:0),n},_onRequestStateChange:function(t,e){if(l.debug("request id "+e.id+"."+e.sends+" state changed to "+e.xhr.readyState),e.abort)e.abort=!1;else if(4===e.xhr.readyState){var n=this._getRequestStatus(e);if(this.lastResponseHeaders=e.xhr.getAllResponseHeaders(),this.disconnecting&&400<=n)return this._hitError(n),void this._callProtocolErrorHandlers(e);var r=0<n&&n<500,s=e.sends>this._conn.maxRetries;if((r||s)&&(this._removeRequest(e),l.debug("request id "+e.id+" should now be removed")),200===n){var o=this._requests[0]===e;(this._requests[1]===e||o&&0<this._requests.length&&this._requests[0].age()>Math.floor(l.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(e.rid)+1),l.debug("request id "+e.id+"."+e.sends+" got 200"),t(e),this.errors=0}else 0===n||400<=n&&n<600||12e3<=n?(l.error("request id "+e.id+"."+e.sends+" error "+n+" happened"),this._hitError(n),this._callProtocolErrorHandlers(e),400<=n&&n<500&&(this._conn._changeConnectStatus(l.Status.DISCONNECTING,null),this._conn._doDisconnect())):l.error("request id "+e.id+"."+e.sends+" error "+n+" happened");r||s?s&&!this._conn.connected&&this._conn._changeConnectStatus(l.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(t){var n=this,r=this._requests[t],e=this._getRequestStatus(r,-1);if(r.sends>this._conn.maxRetries)this._conn._onDisconnectTimeout();else{var s=r.age(),o=!isNaN(s)&&s>Math.floor(l.TIMEOUT*this.wait),i=null!==r.dead&&r.timeDead()>Math.floor(l.SECONDARY_TIMEOUT*this.wait),a=4===r.xhr.readyState&&(e<1||500<=e);if((o||i||a)&&(i&&l.error("Request ".concat(this._requests[t].id," timed out (secondary), restarting")),r.abort=!0,r.xhr.abort(),r.xhr.onreadystatechange=function(){},this._requests[t]=new l.Request(r.xmlData,r.origFunc,r.rid,r.sends),r=this._requests[t]),0===r.xhr.readyState){l.debug("request id "+r.id+"."+r.sends+" posting");try{var u=this._conn.options.contentType||"text/xml; charset=utf-8";r.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==r.xhr.setRequestHeader&&r.xhr.setRequestHeader("Content-Type",u),this._conn.options.withCredentials&&(r.xhr.withCredentials=!0)}catch(t){return l.error("XHR open failed: "+t.toString()),this._conn.connected||this._conn._changeConnectStatus(l.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var c=function(){if(r.date=new Date,n._conn.options.customHeaders){var t=n._conn.options.customHeaders;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.xhr.setRequestHeader(e,t[e])}r.xhr.send(r.data)};if(1<r.sends){var d=1e3*Math.min(Math.floor(l.TIMEOUT*this.wait),Math.pow(r.sends,3));setTimeout(function(){c()},d)}else c();r.sends++,this._conn.xmlOutput!==l.Connection.prototype.xmlOutput&&(r.xmlData.nodeName===this.strip&&r.xmlData.childNodes.length?this._conn.xmlOutput(r.xmlData.childNodes[0]):this._conn.xmlOutput(r.xmlData)),this._conn.rawOutput!==l.Connection.prototype.rawOutput&&this._conn.rawOutput(r.data)}else l.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+r.xhr.readyState)}},_removeRequest:function(t){l.debug("removing request");for(var e=this._requests.length-1;0<=e;e--)t===this._requests[e]&&this._requests.splice(e,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(t){var e=this._requests[t];null===e.dead&&(e.dead=new Date),this._processRequest(t)},_reqToData:function(t){try{return t.getResponse()}catch(t){if("parsererror"!==t.message)throw t;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(t){l.info("_sendTerminate was called");var e=this._buildBody().attrs({type:"terminate"});t&&e.cnode(t.tree());var n=new l.Request(e.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),e.tree().getAttribute("rid"));this._requests.push(n),this._throttledRequestHandler()},_send:function(){var t=this;clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){return t._conn._onIdle()},100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?l.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):l.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(0<this._requests.length&&this._processRequest(0),1<this._requests.length&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}}},"./src/core.js":function(t,e,n){"use strict";n.r(e);var p=n("./src/md5.js"),C=n("./src/sha1.js"),S=n("./src/utils.js");function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return new g.Builder(t,e)}function s(t){return new g.Builder("iq",t)}function r(t){return new g.Builder("presence",t)}var g={VERSION:"1.3.0",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(t){for(var e=0;e<g.XHTML.tags.length;e++)if(t===g.XHTML.tags[e])return!0;return!1},validAttribute:function(t,e){if(void 0!==g.XHTML.attributes[t]&&0<g.XHTML.attributes[t].length)for(var n=0;n<g.XHTML.attributes[t].length;n++)if(e===g.XHTML.attributes[t][n])return!0;return!1},validCSS:function(t){for(var e=0;e<g.XHTML.css.length;e++)if(t===g.XHTML.css[e])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},ErrorCondition:{BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(t,e){g.NS[t]=e},forEachChild:function(t,e,n){for(var r=0;r<t.childNodes.length;r++){var s=t.childNodes[r];s.nodeType!==g.ElementType.NORMAL||e&&!this.isTagEqual(s,e)||n(s)}},isTagEqual:function(t,e){return t.tagName===e},_xmlGenerator:null,_makeGenerator:function(){var t;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(t=this._getIEXmlDom()).appendChild(t.createElement("strophe")):t=document.implementation.createDocument("jabber:client","strophe",null),t},xmlGenerator:function(){return g._xmlGenerator||(g._xmlGenerator=g._makeGenerator()),g._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(t){e=null}return e},xmlElement:function(t){if(!t)return null;for(var e=g.xmlGenerator().createElement(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r)if("string"==typeof r||"number"==typeof r)e.appendChild(g.xmlTextNode(r));else if("object"===_(r)&&"function"==typeof r.sort)for(var s=0;s<r.length;s++){var o=r[s];"object"===_(o)&&"function"==typeof o.sort&&void 0!==o[1]&&null!==o[1]&&e.setAttribute(o[0],o[1])}else if("object"===_(r))for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&void 0!==r[i]&&null!==r[i]&&e.setAttribute(i,r[i])}return e},xmlescape:function(t){return t=(t=(t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")},xmlunescape:function(t){return t=(t=(t=(t=(t=t.replace(/\&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')},xmlTextNode:function(t){return g.xmlGenerator().createTextNode(t)},xmlHtmlNode:function(t){var e;DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t));return e},getText:function(t){if(!t)return null;var e="";0===t.childNodes.length&&t.nodeType===g.ElementType.TEXT&&(e+=t.nodeValue);for(var n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType===g.ElementType.TEXT&&(e+=t.childNodes[n].nodeValue);return g.xmlescape(e)},copyElement:function(t){var e;if(t.nodeType===g.ElementType.NORMAL){e=g.xmlElement(t.tagName);for(var n=0;n<t.attributes.length;n++)e.setAttribute(t.attributes[n].nodeName,t.attributes[n].value);for(var r=0;r<t.childNodes.length;r++)e.appendChild(g.copyElement(t.childNodes[r]))}else t.nodeType===g.ElementType.TEXT&&(e=g.xmlGenerator().createTextNode(t.nodeValue));return e},createHtml:function(t){var e;if(t.nodeType===g.ElementType.NORMAL){var n=t.nodeName.toLowerCase();if(g.XHTML.validTag(n))try{e=g.xmlElement(n);for(var r=0;r<g.XHTML.attributes[n].length;r++){var s=g.XHTML.attributes[n][r],o=t.getAttribute(s);if(null!=o&&""!==o&&!1!==o&&0!==o)if("style"===s&&"object"===_(o)&&void 0!==o.cssText&&(o=o.cssText),"style"===s){for(var i=[],a=o.split(";"),u=0;u<a.length;u++){var c=a[u].split(":"),d=c[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase();if(g.XHTML.validCSS(d)){var l=c[1].replace(/^\s*/,"").replace(/\s*$/,"");i.push(d+": "+l)}}0<i.length&&(o=i.join("; "),e.setAttribute(s,o))}else e.setAttribute(s,o)}for(var h=0;h<t.childNodes.length;h++)e.appendChild(g.createHtml(t.childNodes[h]))}catch(t){e=g.xmlTextNode("")}else{e=g.xmlGenerator().createDocumentFragment();for(var f=0;f<t.childNodes.length;f++)e.appendChild(g.createHtml(t.childNodes[f]))}}else if(t.nodeType===g.ElementType.FRAGMENT){e=g.xmlGenerator().createDocumentFragment();for(var p=0;p<t.childNodes.length;p++)e.appendChild(g.createHtml(t.childNodes[p]))}else t.nodeType===g.ElementType.TEXT&&(e=g.xmlTextNode(t.nodeValue));return e},escapeNode:function(t){return"string"!=typeof t?t:t.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(t){return"string"!=typeof t?t:t.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(t){return t.indexOf("@")<0?null:t.split("@")[0]},getDomainFromJid:function(t){var e=g.getBareJidFromJid(t);if(e.indexOf("@")<0)return e;var n=e.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(t){var e=t.split("/");return e.length<2?null:(e.splice(0,1),e.join("/"))},getBareJidFromJid:function(t){return t?t.split("/")[0]:null},_handleError:function(t){void 0!==t.stack&&g.fatal(t.stack),t.sourceURL?g.fatal("error: "+this.handler+" "+t.sourceURL+":"+t.line+" - "+t.name+": "+t.message):t.fileName?g.fatal("error: "+this.handler+" "+t.fileName+":"+t.lineNumber+" - "+t.name+": "+t.message):g.fatal("error: "+t.message)},log:function(t,e){t===this.LogLevel.FATAL&&"object"===_(window.console)&&"function"==typeof window.console.error&&window.console.error(e)},debug:function(t){this.log(this.LogLevel.DEBUG,t)},info:function(t){this.log(this.LogLevel.INFO,t)},warn:function(t){this.log(this.LogLevel.WARN,t)},error:function(t){this.log(this.LogLevel.ERROR,t)},fatal:function(t){this.log(this.LogLevel.FATAL,t)},serialize:function(n){if(!n)return null;"function"==typeof n.tree&&(n=n.tree());var t=o(Array(n.attributes.length).keys()).map(function(t){return n.attributes[t].nodeName});t.sort();var e=t.reduce(function(t,e){return"".concat(t," ").concat(e,'="').concat(g.xmlescape(n.attributes.getNamedItem(e).value),'"')},"<".concat(n.nodeName));if(0<n.childNodes.length){e+=">";for(var r=0;r<n.childNodes.length;r++){var s=n.childNodes[r];switch(s.nodeType){case g.ElementType.NORMAL:e+=g.serialize(s);break;case g.ElementType.TEXT:e+=g.xmlescape(s.nodeValue);break;case g.ElementType.CDATA:e+="<![CDATA["+s.nodeValue+"]]>"}}e+="</"+n.nodeName+">"}else e+="/>";return e},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(t,e){g._connectionPlugins[t]=e},Builder:function(t,e){"presence"!==t&&"message"!==t&&"iq"!==t||(e&&!e.xmlns?e.xmlns=g.NS.CLIENT:e||(e={xmlns:g.NS.CLIENT})),this.nodeTree=g.xmlElement(t,e),this.node=this.nodeTree}};g.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return g.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(void 0===t[e]?this.node.removeAttribute(e):this.node.setAttribute(e,t[e]));return this},c:function(t,e,n){var r=g.xmlElement(t,e,n);return this.node.appendChild(r),"string"!=typeof n&&"number"!=typeof n&&(this.node=r),this},cnode:function(t){var e,n=g.xmlGenerator();try{e=void 0!==n.importNode}catch(t){e=!1}var r=e?n.importNode(t,!0):g.copyElement(t);return this.node.appendChild(r),this.node=r,this},t:function(t){var e=g.xmlTextNode(t);return this.node.appendChild(e),this},h:function(t){var e=document.createElement("body");e.innerHTML=t;for(var n=g.createHtml(e);0<n.childNodes.length;)this.node.appendChild(n.childNodes[0]);return this}},g.Handler=function(t,e,n,r,s,o,i){this.handler=t,this.ns=e,this.name=n,this.type=r,this.id=s,this.options=i||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(g.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=o?g.getBareJidFromJid(o):null:this.from=o,this.user=!0},g.Handler.prototype={getNamespace:function(t){var e=t.getAttribute("xmlns");return e&&this.options.ignoreNamespaceFragment&&(e=e.split("#")[0]),e},namespaceMatch:function(t){var e=this,n=!1;return!this.ns||(g.forEachChild(t,null,function(t){e.getNamespace(t)===e.ns&&(n=!0)}),n||this.getNamespace(t)===this.ns)},isMatch:function(t){var e=t.getAttribute("from");this.options.matchBareFromJid&&(e=g.getBareJidFromJid(e));var n=t.getAttribute("type");return!(!this.namespaceMatch(t)||this.name&&!g.isTagEqual(t,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(n):n!==this.type)||this.id&&t.getAttribute("id")!==this.id||this.from&&e!==this.from)},run:function(t){var e=null;try{e=this.handler(t)}catch(t){throw g._handleError(t),t}return e},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},g.TimedHandler=function(t,e){this.period=t,this.handler=e,this.lastCalled=(new Date).getTime(),this.user=!0},g.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},g.Connection=function(t,e){var n=this;this.service=t,this.options=e||{};var r=this.options.protocol||"";for(var s in 0===t.indexOf("ws:")||0===t.indexOf("wss:")||0===r.indexOf("ws")?this._proto=new g.Websocket(this):this._proto=new g.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){return n._onIdle()},100),S.default.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),g._connectionPlugins)if(Object.prototype.hasOwnProperty.call(g._connectionPlugins,s)){var o=function(){};o.prototype=g._connectionPlugins[s],this[s]=new o,this[s].init(this)}},g.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(t){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)});return"string"==typeof t||"number"==typeof t?e+":"+t:e+""},addProtocolErrorHandler:function(t,e,n){this.protocolErrorHandlers[t][e]=n},connect:function(t,e,n,r,s,o,i){this.jid=t,this.authzid=g.getBareJidFromJid(this.jid),this.authcid=i||g.getNodeFromJid(this.jid),this.pass=e,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=g.getDomainFromJid(this.jid),this._changeConnectStatus(g.Status.CONNECTING,null),this._proto._connect(r,s,o)},attach:function(t,e,n,r,s,o,i){if(!(this._proto instanceof g.Bosh)){var a=new Error('The "attach" method can only be used with a BOSH connection.');throw a.name="StropheSessionError",a}this._proto._attach(t,e,n,r,s,o,i)},restore:function(t,e,n,r,s){if(!this._sessionCachingSupported()){var o=new Error('The "restore" method can only be used with a BOSH connection.');throw o.name="StropheSessionError",o}this._proto._restore(t,e,n,r,s)},_sessionCachingSupported:function(){if(this._proto instanceof g.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(t){return!1}return!0}return!1},xmlInput:function(t){},xmlOutput:function(t){},rawInput:function(t){},rawOutput:function(t){},nextValidRid:function(t){},send:function(t){if(null!==t){if("function"==typeof t.sort)for(var e=0;e<t.length;e++)this._queueData(t[e]);else"function"==typeof t.tree?this._queueData(t.tree()):this._queueData(t);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(t,e,n,r){var s=this,o=null;"function"==typeof t.tree&&(t=t.tree());var i=t.getAttribute("id");if(i||(i=this.getUniqueId("sendPresence"),t.setAttribute("id",i)),"function"==typeof e||"function"==typeof n){var a=this.addHandler(function(t){o&&s.deleteTimedHandler(o),"error"===t.getAttribute("type")?n&&n(t):e&&e(t)},null,"presence",null,i);r&&(o=this.addTimedHandler(r,function(){return s.deleteHandler(a),n&&n(null),!1}))}return this.send(t),i},sendIQ:function(t,r,s,e){var o=this,i=null;"function"==typeof t.tree&&(t=t.tree());var n=t.getAttribute("id");if(n||(n=this.getUniqueId("sendIQ"),t.setAttribute("id",n)),"function"==typeof r||"function"==typeof s){var a=this.addHandler(function(t){i&&o.deleteTimedHandler(i);var e=t.getAttribute("type");if("result"===e)r&&r(t);else{if("error"!==e){var n=new Error("Got bad IQ type of ".concat(e));throw n.name="StropheError",n}s&&s(t)}},null,"iq",["error","result"],n);e&&(i=this.addTimedHandler(e,function(){return o.deleteHandler(a),s&&s(null),!1}))}return this.send(t),n},_queueData:function(t){if(null===t||!t.tagName||!t.childNodes){var e=new Error("Cannot queue non-DOMElement.");throw e.name="StropheError",e}this._data.push(t)},_sendRestart:function(){var t=this;this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){return t._onIdle()},100)},addTimedHandler:function(t,e){var n=new g.TimedHandler(t,e);return this.addTimeds.push(n),n},deleteTimedHandler:function(t){this.removeTimeds.push(t)},addHandler:function(t,e,n,r,s,o,i){var a=new g.Handler(t,e,n,r,s,o,i);return this.addHandlers.push(a),a},deleteHandler:function(t){this.removeHandlers.push(t);var e=this.addHandlers.indexOf(t);0<=e&&this.addHandlers.splice(e,1)},registerSASLMechanisms:function(t){this.mechanisms={},(t=t||[g.SASLAnonymous,g.SASLExternal,g.SASLMD5,g.SASLOAuthBearer,g.SASLXOAuth2,g.SASLPlain,g.SASLSHA1]).forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(t){this.mechanisms[t.prototype.name]=t},disconnect:function(t){if(this._changeConnectStatus(g.Status.DISCONNECTING,t),g.info("Disconnect was called because: "+t),this.connected){var e=!1;this.disconnecting=!0,this.authenticated&&(e=r({xmlns:g.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(e)}else g.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(t,e,n){for(var r in g._connectionPlugins)if(Object.prototype.hasOwnProperty.call(g._connectionPlugins,r)){var s=this[r];if(s.statusChanged)try{s.statusChanged(t,e)}catch(t){g.error("".concat(r," plugin caused an exception changing status: ").concat(t))}}if(this.connect_callback)try{this.connect_callback(t,e,n)}catch(t){g._handleError(t),g.error("User connection callback caused an exception: ".concat(t))}},_doDisconnect:function(t){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),g.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(g.Status.DISCONNECTED,t),this.connected=!1},_dataRecv:function(t,e){var s=this;g.info("_dataRecv called");var n=this._proto._reqToData(t);if(null!==n){for(this.xmlInput!==g.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==g.Connection.prototype.rawInput&&(e?this.rawInput(e):this.rawInput(g.serialize(n)));0<this.removeHandlers.length;){var r=this.removeHandlers.pop(),o=this.handlers.indexOf(r);0<=o&&this.handlers.splice(o,1)}for(;0<this.addHandlers.length;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())this._doDisconnect();else{var i=n.getAttribute("type");if(null!==i&&"terminate"===i){if(this.disconnecting)return;var a=n.getAttribute("condition"),u=n.getElementsByTagName("conflict");return null!==a?("remote-stream-error"===a&&0<u.length&&(a="conflict"),this._changeConnectStatus(g.Status.CONNFAIL,a)):this._changeConnectStatus(g.Status.CONNFAIL,g.ErrorCondition.UNKOWN_REASON),void this._doDisconnect(a)}g.forEachChild(n,null,function(t){var e=s.handlers;s.handlers=[];for(var n=0;n<e.length;n++){var r=e[n];try{!r.isMatch(t)||!s.authenticated&&r.user?s.handlers.push(r):r.run(t)&&s.handlers.push(r)}catch(t){g.warn("Removing Strophe handlers due to uncaught exception: "+t.message)}}})}}},mechanisms:{},_connect_cb:function(t,e,n){var r;g.info("_connect_cb was called"),this.connected=!0;try{r=this._proto._reqToData(t)}catch(t){if(t.name!==g.ErrorCondition.BAD_FORMAT)throw t;this._changeConnectStatus(g.Status.CONNFAIL,g.ErrorCondition.BAD_FORMAT),this._doDisconnect(g.ErrorCondition.BAD_FORMAT)}if(r&&(this.xmlInput!==g.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==g.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(g.serialize(r))),this._proto._connect_cb(r)!==g.Status.CONNFAIL))if(r.getElementsByTagNameNS?0<r.getElementsByTagNameNS(g.NS.STREAM,"features").length:0<r.getElementsByTagName("stream:features").length||0<r.getElementsByTagName("features").length){var s=[],o=r.getElementsByTagName("mechanism");if(0<o.length)for(var i=0;i<o.length;i++){var a=g.getText(o[i]);this.mechanisms[a]&&s.push(this.mechanisms[a])}0!==s.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(s):this._proto._no_auth_received(e)}else this._proto._no_auth_received(e)},sortMechanismsByPriority:function(t){for(var e=0;e<t.length-1;++e){for(var n=e,r=e+1;r<t.length;++r)t[r].prototype.priority>t[n].prototype.priority&&(n=r);if(n!==e){var s=t[e];t[e]=t[n],t[n]=s}}return t},_attemptSASLAuth:function(t){t=this.sortMechanismsByPriority(t||[]);for(var e=!1,n=0;n<t.length;++n)if(t[n].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new t[n],this._sasl_mechanism.onStart(this);var r=i("auth",{xmlns:g.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var s=this._sasl_mechanism.onChallenge(this,null);r.t(btoa(s))}this.send(r.tree()),e=!0;break}return e},_attemptLegacyAuth:function(){null===g.getNodeFromJid(this.jid)?(this._changeConnectStatus(g.Status.CONNFAIL,g.ErrorCondition.MISSING_JID_NODE),this.disconnect(g.ErrorCondition.MISSING_JID_NODE)):(this._changeConnectStatus(g.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(s({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:g.NS.AUTH}).c("username",{}).t(g.getNodeFromJid(this.jid)).tree()))},authenticate:function(t){this._attemptSASLAuth(t)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(t){var e=atob(g.getText(t)),n=this._sasl_mechanism.onChallenge(this,e),r=i("response",{xmlns:g.NS.SASL});return""!==n&&r.t(btoa(n)),this.send(r.tree()),!0},_auth1_cb:function(t){var e=s({type:"set",id:"_auth_2"}).c("query",{xmlns:g.NS.AUTH}).c("username",{}).t(g.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return g.getResourceFromJid(this.jid)||(this.jid=g.getBareJidFromJid(this.jid)+"/strophe"),e.up().c("resource",{}).t(g.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(e.tree()),!1},_sasl_success_cb:function(t){var n=this;if(this._sasl_data["server-signature"]){var e,r=atob(g.getText(t)).match(/([a-z]+)=([^,]+)(,|$)/);if("v"===r[1]&&(e=r[2]),e!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}g.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var s=[],o=function(t,e){for(;t.length;)n.deleteHandler(t.pop());return n._sasl_auth1_cb(e),!1};return s.push(this._addSysHandler(function(t){return o(s,t)},null,"stream:features",null,null)),s.push(this._addSysHandler(function(t){return o(s,t)},g.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(t){this.features=t;for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0)}if(!this.do_bind)return this._changeConnectStatus(g.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var r=g.getResourceFromJid(this.jid);return r?this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:g.NS.BIND}).c("resource",{}).t(r).tree()):this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:g.NS.BIND}).tree()),!1},_sasl_bind_cb:function(t){var e;if("error"===t.getAttribute("type"))return g.info("SASL binding failed."),0<t.getElementsByTagName("conflict").length&&(e=g.ErrorCondition.CONFLICT),this._changeConnectStatus(g.Status.AUTHFAIL,e,t),!1;var n=t.getElementsByTagName("bind");if(!(0<n.length))return g.info("SASL binding failed."),this._changeConnectStatus(g.Status.AUTHFAIL,null,t),!1;var r=n[0].getElementsByTagName("jid");0<r.length&&(this.jid=g.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(s({type:"set",id:"_session_auth_2"}).c("session",{xmlns:g.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(g.Status.CONNECTED,null)))},_sasl_session_cb:function(t){if("result"===t.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(g.Status.CONNECTED,null);else if("error"===t.getAttribute("type"))return g.info("Session creation failed."),this._changeConnectStatus(g.Status.AUTHFAIL,null,t),!1;return!1},_sasl_failure_cb:function(t){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(g.Status.AUTHFAIL,null,t),!1},_auth2_cb:function(t){return"result"===t.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(g.Status.CONNECTED,null)):"error"===t.getAttribute("type")&&(this._changeConnectStatus(g.Status.AUTHFAIL,null,t),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(t,e){var n=new g.TimedHandler(t,e);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(t,e,n,r,s){var o=new g.Handler(t,e,n,r,s);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return g.info("_onDisconnectTimeout was called"),this._changeConnectStatus(g.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var t=this;0<this.addTimeds.length;)this.timedHandlers.push(this.addTimeds.pop());for(;0<this.removeTimeds.length;){var e=this.removeTimeds.pop(),n=this.timedHandlers.indexOf(e);0<=n&&this.timedHandlers.splice(n,1)}for(var r=(new Date).getTime(),s=[],o=0;o<this.timedHandlers.length;o++){var i=this.timedHandlers[o];if(this.authenticated||!i.user)i.lastCalled+i.period-r<=0?i.run()&&s.push(i):s.push(i)}this.timedHandlers=s,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){return t._onIdle()},100))}},g.SASLMechanism=function(t,e,n){this.name=t,this.isClientFirst=e,this.priority=n},g.SASLMechanism.prototype={test:function(t){return!0},onStart:function(t){this._connection=t},onChallenge:function(t,e){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},g.SASLAnonymous=function(){},g.SASLAnonymous.prototype=new g.SASLMechanism("ANONYMOUS",!1,20),g.SASLAnonymous.prototype.test=function(t){return null===t.authcid},g.SASLPlain=function(){},g.SASLPlain.prototype=new g.SASLMechanism("PLAIN",!0,50),g.SASLPlain.prototype.test=function(t){return null!==t.authcid},g.SASLPlain.prototype.onChallenge=function(t){var e=t.authzid;return e+="\0",e+=t.authcid,e+="\0",e+=t.pass,S.default.utf16to8(e)},g.SASLSHA1=function(){},g.SASLSHA1.prototype=new g.SASLMechanism("SCRAM-SHA-1",!0,70),g.SASLSHA1.prototype.test=function(t){return null!==t.authcid},g.SASLSHA1.prototype.onChallenge=function(t,e,n){var r=n||p.default.hexdigest(1234567890*Math.random()),s="n="+S.default.utf16to8(t.authcid);return s+=",r=",s+=r,t._sasl_data.cnonce=r,s="n,,"+(t._sasl_data["client-first-message-bare"]=s),this.onChallenge=function(t,e){for(var n,r,s,o,i,a,u,c,d="c=biws,",l="".concat(t._sasl_data["client-first-message-bare"],",").concat(e,","),h=t._sasl_data.cnonce,f=/([a-z]+)=([^,]+)(,|$)/;e.match(f);){var p=e.match(f);switch(e=e.replace(p[0],""),p[1]){case"r":n=p[2];break;case"s":r=p[2];break;case"i":s=p[2]}}if(n.substr(0,h.length)!==h)return t._sasl_data={},t._sasl_failure_cb();l+=d+="r="+n,r=atob(r),r+="\0\0\0";var _=S.default.utf16to8(t.pass);for(o=a=C.default.core_hmac_sha1(_,r),u=1;u<s;u++){for(i=C.default.core_hmac_sha1(_,C.default.binb2str(a)),c=0;c<5;c++)o[c]^=i[c];a=i}o=C.default.binb2str(o);var g=C.default.core_hmac_sha1(o,"Client Key"),m=C.default.str_hmac_sha1(o,"Server Key"),E=C.default.core_hmac_sha1(C.default.str_sha1(C.default.binb2str(g)),l);for(t._sasl_data["server-signature"]=C.default.b64_hmac_sha1(m,l),c=0;c<5;c++)g[c]^=E[c];return d+=",p="+btoa(C.default.binb2str(g))},s},g.SASLMD5=function(){},g.SASLMD5.prototype=new g.SASLMechanism("DIGEST-MD5",!1,60),g.SASLMD5.prototype.test=function(t){return null!==t.authcid},g.SASLMD5.prototype._quote=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},g.SASLMD5.prototype.onChallenge=function(t,e,n){for(var r=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,s=n||p.default.hexdigest(""+1234567890*Math.random()),o="",i=null,a="";e.match(r);){var u=e.match(r);switch(e=e.replace(u[0],""),u[2]=u[2].replace(/^"(.+)"$/,"$1"),u[1]){case"realm":o=u[2];break;case"nonce":a=u[2];break;case"qop":u[2];break;case"host":i=u[2]}}var c=t.servtype+"/"+t.domain;null!==i&&(c=c+"/"+i);var d=S.default.utf16to8(t.authcid+":"+o+":"+this._connection.pass),l=p.default.hash(d)+":"+a+":"+s,h="AUTHENTICATE:"+c,f="";return f+="charset=utf-8,",f+="username="+this._quote(S.default.utf16to8(t.authcid))+",",f+="realm="+this._quote(o)+",",f+="nonce="+this._quote(a)+",",f+="nc=00000001,",f+="cnonce="+this._quote(s)+",",f+="digest-uri="+this._quote(c)+",",f+="response="+p.default.hexdigest(p.default.hexdigest(l)+":"+a+":00000001:"+s+":auth:"+p.default.hexdigest(h))+",",f+="qop=auth",this.onChallenge=function(){return""},f},g.SASLOAuthBearer=function(){},g.SASLOAuthBearer.prototype=new g.SASLMechanism("OAUTHBEARER",!0,40),g.SASLOAuthBearer.prototype.test=function(t){return null!==t.pass},g.SASLOAuthBearer.prototype.onChallenge=function(t){var e="n,";return null!==t.authcid&&(e=e+"a="+t.authzid),e+=",",e+="",e+="auth=Bearer ",e+=t.pass,e+="",e+="",S.default.utf16to8(e)},g.SASLExternal=function(){},g.SASLExternal.prototype=new g.SASLMechanism("EXTERNAL",!0,10),g.SASLExternal.prototype.onChallenge=function(t){return t.authcid===t.authzid?"":t.authzid},g.SASLXOAuth2=function(){},g.SASLXOAuth2.prototype=new g.SASLMechanism("X-OAUTH2",!0,30),g.SASLXOAuth2.prototype.test=function(t){return null!==t.pass},g.SASLXOAuth2.prototype.onChallenge=function(t){var e="\0";return null!==t.authcid&&(e+=t.authzid),e+="\0",e+=t.pass,S.default.utf16to8(e)},e.default={Strophe:g,$build:i,$iq:s,$msg:function(t){return new g.Builder("message",t)},$pres:r,SHA1:C.default,MD5:p.default,b64_hmac_sha1:C.default.b64_hmac_sha1,b64_sha1:C.default.b64_sha1,str_hmac_sha1:C.default.str_hmac_sha1,str_sha1:C.default.str_sha1}},"./src/md5.js":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return o});var l=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},r=function(t){for(var e=[],n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},a=function(t,e,n,r,s,o){return l((i=l(l(e,t),l(r,o)))<<(a=s)|i>>>32-a,n);var i,a},h=function(t,e,n,r,s,o,i){return a(e&n|~e&r,t,e,s,o,i)},f=function(t,e,n,r,s,o,i){return a(e&r|n&~r,t,e,s,o,i)},p=function(t,e,n,r,s,o,i){return a(e^n^r,t,e,s,o,i)},_=function(t,e,n,r,s,o,i){return a(n^(e|~r),t,e,s,o,i)},s=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n,r,s,o,i=1732584193,a=-271733879,u=-1732584194,c=271733878,d=0;d<t.length;d+=16)i=h(n=i,r=a,s=u,o=c,t[d+0],7,-680876936),c=h(c,i,a,u,t[d+1],12,-389564586),u=h(u,c,i,a,t[d+2],17,606105819),a=h(a,u,c,i,t[d+3],22,-1044525330),i=h(i,a,u,c,t[d+4],7,-176418897),c=h(c,i,a,u,t[d+5],12,1200080426),u=h(u,c,i,a,t[d+6],17,-1473231341),a=h(a,u,c,i,t[d+7],22,-45705983),i=h(i,a,u,c,t[d+8],7,1770035416),c=h(c,i,a,u,t[d+9],12,-1958414417),u=h(u,c,i,a,t[d+10],17,-42063),a=h(a,u,c,i,t[d+11],22,-1990404162),i=h(i,a,u,c,t[d+12],7,1804603682),c=h(c,i,a,u,t[d+13],12,-40341101),u=h(u,c,i,a,t[d+14],17,-1502002290),a=h(a,u,c,i,t[d+15],22,1236535329),i=f(i,a,u,c,t[d+1],5,-165796510),c=f(c,i,a,u,t[d+6],9,-1069501632),u=f(u,c,i,a,t[d+11],14,643717713),a=f(a,u,c,i,t[d+0],20,-373897302),i=f(i,a,u,c,t[d+5],5,-701558691),c=f(c,i,a,u,t[d+10],9,38016083),u=f(u,c,i,a,t[d+15],14,-660478335),a=f(a,u,c,i,t[d+4],20,-405537848),i=f(i,a,u,c,t[d+9],5,568446438),c=f(c,i,a,u,t[d+14],9,-1019803690),u=f(u,c,i,a,t[d+3],14,-187363961),a=f(a,u,c,i,t[d+8],20,1163531501),i=f(i,a,u,c,t[d+13],5,-1444681467),c=f(c,i,a,u,t[d+2],9,-51403784),u=f(u,c,i,a,t[d+7],14,1735328473),a=f(a,u,c,i,t[d+12],20,-1926607734),i=p(i,a,u,c,t[d+5],4,-378558),c=p(c,i,a,u,t[d+8],11,-2022574463),u=p(u,c,i,a,t[d+11],16,1839030562),a=p(a,u,c,i,t[d+14],23,-35309556),i=p(i,a,u,c,t[d+1],4,-1530992060),c=p(c,i,a,u,t[d+4],11,1272893353),u=p(u,c,i,a,t[d+7],16,-155497632),a=p(a,u,c,i,t[d+10],23,-1094730640),i=p(i,a,u,c,t[d+13],4,681279174),c=p(c,i,a,u,t[d+0],11,-358537222),u=p(u,c,i,a,t[d+3],16,-722521979),a=p(a,u,c,i,t[d+6],23,76029189),i=p(i,a,u,c,t[d+9],4,-640364487),c=p(c,i,a,u,t[d+12],11,-421815835),u=p(u,c,i,a,t[d+15],16,530742520),a=p(a,u,c,i,t[d+2],23,-995338651),i=_(i,a,u,c,t[d+0],6,-198630844),c=_(c,i,a,u,t[d+7],10,1126891415),u=_(u,c,i,a,t[d+14],15,-1416354905),a=_(a,u,c,i,t[d+5],21,-57434055),i=_(i,a,u,c,t[d+12],6,1700485571),c=_(c,i,a,u,t[d+3],10,-1894986606),u=_(u,c,i,a,t[d+10],15,-1051523),a=_(a,u,c,i,t[d+1],21,-2054922799),i=_(i,a,u,c,t[d+8],6,1873313359),c=_(c,i,a,u,t[d+15],10,-30611744),u=_(u,c,i,a,t[d+6],15,-1560198380),a=_(a,u,c,i,t[d+13],21,1309151649),i=_(i,a,u,c,t[d+4],6,-145523070),c=_(c,i,a,u,t[d+11],10,-1120210379),u=_(u,c,i,a,t[d+2],15,718787259),a=_(a,u,c,i,t[d+9],21,-343485551),i=l(i,n),a=l(a,r),u=l(u,s),c=l(c,o);return[i,a,u,c]},o={hexdigest:function(t){return function(t){for(var e="0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15);return n}(s(r(t),8*t.length))},hash:function(t){return function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}(s(r(t),8*t.length))}}},"./src/sha1.js":function(t,e,n){"use strict";function a(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;var n,r,s,o,i,a,u,c,d,l=new Array(80),h=1732584193,f=-271733879,p=-1732584194,_=271733878,g=-1009589776;for(n=0;n<t.length;n+=16){for(o=h,i=f,a=p,u=_,c=g,r=0;r<80;r++)l[r]=r<16?t[n+r]:C(l[r-3]^l[r-8]^l[r-14]^l[r-16],1),s=E(E(C(h,5),m(r,f,p,_)),E(E(g,l[r]),(d=r)<20?1518500249:d<40?1859775393:d<60?-1894007588:-899497514)),g=_,_=p,p=C(f,30),f=h,h=s;h=E(h,o),f=E(f,i),p=E(p,a),_=E(_,u),g=E(g,c)}return[h,f,p,_,g]}function m(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function r(t,e){var n=u(t);16<n.length&&(n=a(n,8*t.length));for(var r=new Array(16),s=new Array(16),o=0;o<16;o++)r[o]=909522486^n[o],s[o]=1549556828^n[o];var i=a(r.concat(u(e)),512+8*e.length);return a(s.concat(i),672)}function E(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function C(t,e){return t<<e|t>>>32-e}function u(t){for(var e=[],n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<24-n%32;return e}function s(t){for(var e,n,r="",s=0;s<4*t.length;s+=3)for(e=(t[s>>2]>>8*(3-s%4)&255)<<16|(t[s+1>>2]>>8*(3-(s+1)%4)&255)<<8|t[s+2>>2]>>8*(3-(s+2)%4)&255,n=0;n<4;n++)8*s+6*n>32*t.length?r+="=":r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>6*(3-n)&63);return r}function o(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>24-n%32&255);return e}n.r(e),n.d(e,"default",function(){return i});var i={b64_hmac_sha1:function(t,e){return s(r(t,e))},b64_sha1:function(t){return s(a(u(t),8*t.length))},binb2str:o,core_hmac_sha1:r,str_hmac_sha1:function(t,e){return o(r(t,e))},str_sha1:function(t){return o(a(u(t),8*t.length))}}},"./src/strophe.js":function(t,e,n){"use strict";n.r(e);n("./src/bosh.js"),n("./src/websocket.js");var r=n("./src/core.js");n.d(e,"default",function(){return r.default})},"./src/utils.js":function(t,e,n){"use strict";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e),n.d(e,"default",function(){return r});var r={utf16to8:function(t){var e,n,r="",s=t.length;for(e=0;e<s;e++)0<=(n=t.charCodeAt(e))&&n<=127?r+=t.charAt(e):(2047<n?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63)):r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},addCookies:function(t){for(var e in t=t||{})if(Object.prototype.hasOwnProperty.call(t,e)){var n="",r="",s="",o=t[e],i="object"===u(o),a=escape(unescape(i?o.value:o));i&&(n=o.expires?";expires="+o.expires:"",r=o.domain?";domain="+o.domain:"",s=o.path?";path="+o.path:""),document.cookie=e+"="+a+n+r+s}}}},"./src/websocket.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core.js"),c=r.default.Strophe,s=r.default.$build;c.Websocket=function(t){this._conn=t,this.strip="wrapper";var e=t.service;if(0!==e.indexOf("ws:")&&0!==e.indexOf("wss:")){var n="";"ws"===t.options.protocol&&"https:"!==window.location.protocol?n+="ws":n+="wss",n+="://"+window.location.host,0!==e.indexOf("/")?n+=window.location.pathname+e:n+=e,t.service=n}},c.Websocket.prototype={_buildStream:function(){return s("open",{xmlns:c.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(t,e){var n;if(0===(n=t.getElementsByTagNameNS?t.getElementsByTagNameNS(c.NS.STREAM,"error"):t.getElementsByTagName("stream:error")).length)return!1;for(var r=n[0],s="",o="",i=0;i<r.childNodes.length;i++){var a=r.childNodes[i];if("urn:ietf:params:xml:ns:xmpp-streams"!==a.getAttribute("xmlns"))break;"text"===a.nodeName?o=a.textContent:s=a.nodeName}var u="WebSocket stream error: ";return u+=s||"unknown",o&&(u+=" - "+o),c.error(u),this._conn._changeConnectStatus(e,s),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(t){if(this._check_streamerror(t,c.Status.CONNFAIL))return c.Status.CONNFAIL},_handleStreamStart:function(t){var e=!1,n=t.getAttribute("xmlns");"string"!=typeof n?e="Missing xmlns in <open />":n!==c.NS.FRAMING&&(e="Wrong xmlns in <open />: "+n);var r=t.getAttribute("version");return"string"!=typeof r?e="Missing version in <open />":"1.0"!==r&&(e="Wrong version in <open />: "+r),!e||(this._conn._changeConnectStatus(c.Status.CONNFAIL,e),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(t){if(0===t.data.indexOf("<open ")||0===t.data.indexOf("<?xml")){var e=t.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===e)return;var n=(new DOMParser).parseFromString(e,"text/xml").documentElement;this._conn.xmlInput(n),this._conn.rawInput(t.data),this._handleStreamStart(n)&&this._connect_cb(n)}else if(0===t.data.indexOf("<close ")){var r=(new DOMParser).parseFromString(t.data,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(t.data);var s=r.getAttribute("see-other-uri");if(s){var o=this._conn.service;(0<=o.indexOf("wss:")&&0<=s.indexOf("wss:")||0<=o.indexOf("ws:"))&&(this._conn._changeConnectStatus(c.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=s,this._connect())}else this._conn._changeConnectStatus(c.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{var i=this._streamWrap(t.data),a=(new DOMParser).parseFromString(i,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(a,null,t.data)}},_disconnect:function(t){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){t&&this._conn.send(t);var e=s("close",{xmlns:c.NS.FRAMING});this._conn.xmlOutput(e.tree());var n=c.serialize(e);this._conn.rawOutput(n);try{this.socket.send(n)}catch(t){c.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){c.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(t){return"<wrapper>"+t+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.onerror=null,this.socket.close()}catch(t){c.debug(t.message)}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(t){this._conn.connected&&!this._conn.disconnecting?(c.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):t&&1006===t.code&&!this._conn.connected&&this.socket?(c.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(c.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):c.info("Websocket closed")},_no_auth_received:function(t){c.error("Server did not offer a supported authentication mechanism"),this._changeConnectStatus(c.Status.CONNFAIL,c.ErrorCondition.NO_AUTH_MECH),t&&t.call(this._conn),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(t){c.error("Websocket error "+t),this._conn._changeConnectStatus(c.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var t=this._conn._data;if(0<t.length&&!this._conn.paused){for(var e=0;e<t.length;e++)if(null!==t[e]){var n=void 0;n="restart"===t[e]?this._buildStream().tree():t[e];var r=c.serialize(n);this._conn.xmlOutput(n),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}},_onMessage:function(t){var e,n='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(t.data===n)return this._conn.rawInput(n),this._conn.xmlInput(t),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===t.data.search("<open ")){if(e=(new DOMParser).parseFromString(t.data,"text/xml").documentElement,!this._handleStreamStart(e))return}else{var r=this._streamWrap(t.data);e=(new DOMParser).parseFromString(r,"text/xml").documentElement}return this._check_streamerror(e,c.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===e.firstChild.nodeName&&"unavailable"===e.firstChild.getAttribute("type")?(this._conn.xmlInput(e),void this._conn.rawInput(c.serialize(e))):void this._conn._dataRecv(e,t.data)},_onOpen:function(){c.info("Websocket open");var t=this._buildStream();this._conn.xmlOutput(t.tree());var e=c.serialize(t);this._conn.rawOutput(e),this.socket.send(e)},_reqToData:function(t){return t},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}}}}).default},t.exports=r()},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var s=n(1),o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onAction=void 0,this.onTextMessageReceived=void 0,this.onMediaMessageReceived=void 0,this.onCall=void 0,s.isFalsy(t[0].onAction)||(this.onAction=t[0].onAction),s.isFalsy(t[0].onTextMessageReceived)||(this.onTextMessageReceived=t[0].onTextMessageReceived),s.isFalsy(t[0].onMediaMessageReceived)||(this.onMediaMessageReceived=t[0].onMediaMessageReceived),s.isFalsy(t[0].onCall)||(this.onCall=t[0].onCall)};e.MessageEventListener=o;var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onIncomingCallReceived=void 0,this.onOutgoingCallAccepted=void 0,this.onOutgoingCallRejected=void 0,this.onIncomingCallCancelled=void 0,s.isFalsy(t[0].onIncomingCallReceived)||(this.onIncomingCallReceived=t[0].onIncomingCallReceived),s.isFalsy(t[0].onOutgoingCallAccepted)||(this.onOutgoingCallAccepted=t[0].onOutgoingCallAccepted),s.isFalsy(t[0].onOutgoingCallRejected)||(this.onOutgoingCallRejected=t[0].onOutgoingCallRejected),s.isFalsy(t[0].onIncomingCallCancelled)||(this.onIncomingCallCancelled=t[0].onIncomingCallCancelled)};e.CallEventListener=a;var u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.isFalsy(t[0].onUserOnline)||(this.onUserOnline=t[0].onUserOnline),s.isFalsy(t[0].onUserOffline)||(this.onUserOffline=t[0].onUserOffline)};e.UserEventListener=u;var c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.isFalsy(t[0].onGroupMemberJoined)||(this.onUserJoined=t[0].onGroupMemberJoined),s.isFalsy(t[0].onGroupMemberLeft)||(this.onUserLeft=t[0].onGroupMemberLeft),s.isFalsy(t[0].onGroupMemberKicked)||(this.onUserKicked=t[0].onGroupMemberKicked),s.isFalsy(t[0].onGroupMemberBanned)||(this.onUserBanned=t[0].onGroupMemberBanned),s.isFalsy(t[0].onGroupMemberUnbanned)||(this.onUserUnbanned=t[0].onGroupMemberUnbanned),s.isFalsy(t[0].onGroupMemberScopeChanged)||(this.onMemberScopeChanged=t[0].onGroupMemberScopeChanged)};e.GroupEventListener=c;var d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.isFalsy(t[0].onYouLeft)||(this.onYouLeft=t[0].onYouLeft),s.isFalsy(t[0].onYouJoined)||(this.onYouJoined=t[0].onYouJoined),s.isFalsy(t[0].onUserJoined)||(this.onUserJoined=t[0].onUserJoined),s.isFalsy(t[0].onUserDisconnected)||(this.onUserLeft=t[0].onUserLeft),s.isFalsy(t[0].onCallEnded)||(this.onCallEnded=t[0].onCallEnded),s.isFalsy(t[0].onError)||(this.onError=t[0].onError)};e.UserCallEventListener=d;var l=function(t,e){this._name=t,this._callback=e},h=function(o){function t(t,e,n,r){var s=o.call(this,t,r)||this;return s._eventListener=e,n&&(s._cursor=n),s}return i(t,o),t}(e.Listener=l);e.MessageListener=h;var f=function(o){function t(t,e,n,r){var s=o.call(this,t,r)||this;return s._eventListener=e,n&&(s._cursor=n),s}return i(t,o),t}(l);e.UserListener=f;var p=function(o){function t(t,e,n,r){var s=o.call(this,t,r)||this;return s._eventListener=e,n&&(s._cursor=n),s}return i(t,o),t}(l);e.GroupListener=p;var _=function(s){function t(t,e,n){var r=s.call(this,"callListner",n)||this;return r._eventListener=t,r}return i(t,s),t}(l);e.UserCallListener=_;var g=function(o){function t(t,e,n,r){var s=o.call(this,t,r)||this;return s._eventListener=e,s}return i(t,o),t}(l);e.CallListener=g},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e,n,r){this.receiver=t,this.type=e,this.receiverType=n,this.category=r}return t.prototype.getId=function(){return this.id},t.prototype.setId=function(t){this.id=t},t.prototype.getMuid=function(){return this.muid},t.prototype.setMuid=function(t){this.muid=t},t.prototype.getSender=function(){return this.sender},t.prototype.setSender=function(t){this.sender=t},t.prototype.getReceiver=function(){return this.receiver},t.prototype.setReceiver=function(t){this.receiver=t},t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.get=function(){return this.id},t.prototype.setReceiverType=function(t){this.receiverType=t},t.prototype.getReceiverType=function(){return this.receiverType},t.prototype.setSentAt=function(t){this.sentAt=t},t.prototype.getSentAt=function(){return this.sentAt},t.prototype.getStatus=function(){return this.status},t.prototype.setStatus=function(t){this.status=t},t}();e.BaseMessage=r},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),s=n(1),o=n(2);e.getUidFromJid=function(t){return t.substring(t.lastIndexOf("]")+1,t.lastIndexOf("@"))},e.getappIdFromJid=function(t){return t.substring(t.lastIndexOf("[")+1,t.lastIndexOf("]"))},e.parseHTML=function(e){try{return e.textContent}catch(t){return e}},e.getJidFromUid=function(t){return s.format(r.XMPP.bare_jid_string,o.CometChat.getAppId(),t,r.XMPP.host)}},function(t,e,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};e.__esModule=!0;var r=n(2),u=n(1),c=n(0),s=n(19),o=function(){function t(t){this.store=c.constants.DEFAULT_STORE,u.isFalsy(t)||(this.store=t),this.messagesStore=s.createInstance({name:u.format(c.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),c.LOCAL_STORE.MESSAGES_STORE)}),this.messagesStore.setDriver([s.LOCALSTORAGE,s.INDEXEDDB,s.WEBSQL])}return t.getInstance=function(){return null==t.MessagesStore&&(t.MessagesStore=new t),t.MessagesStore},t.prototype.set=function(t,e){return this.messagesStore.setItem(t,e)},t.prototype.remove=function(t){this.messagesStore.removeItem(t)},t.prototype.get=function(t){return this.messagesStore.getItem(t)},t.prototype.clearStore=function(){return this.messagesStore.clear()},t.prototype.getAllMessages=function(){var n=this,r={};return new Promise(function(t,e){n.messagesStore.iterate(function(t,e,n){e!=c.constants.MSG_VER_POST&&e!=c.constants.MSG_VER_POST&&(r=a({},r,t))}).then(function(){t(r)})})},t.prototype.clear=function(t){},t.prototype.selectStore=function(t){this.store=t},t.prototype.storeMessages=function(t){var n=this;if(r.CometChat.user.getUid()){var s=r.CometChat.user.getUid(),o={},i=0;return this.get(c.constants.MSG_VER_POST).then(function(r){t.map(function(t){var e;if(!u.isFalsy(t)){0==i&&(i=parseInt(t.getId().toString())),i>t.getId()&&(i=parseInt(t.getId().toString())),r<t.getId()&&(r=parseInt(t.getId().toString()));var n=void 0;n=t.getSender()instanceof Object?t.getSender().getUid():t.getSender(),t.getReceiverType()==c.MessageConstatnts.RECEIVER_TYPE.GROUP&&(n=t.getReceiver()),t.getSender()instanceof Object?t.getSender().getUid()==s&&(n=t.getReceiver()):t.getSender()==s&&(n=t.getReceiver()),o[n]||(o[n]={}),o[n]=a({},o[n],((e={})[t.getId()]=t,e))}}),n.get(c.constants.MSG_VER_PRE).then(function(t){(0<i&&i<t||null==t)&&n.set(c.constants.MSG_VER_PRE,i)})&&0<r&&n.set(c.constants.MSG_VER_POST,r),Object.keys(o).map(function(e){n.get(e).then(function(t){null==t&&(t={}),n.set(e,a({},o[e],t))})})}),!0}},t}();e.MessagesStore=o},function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};e.__esModule=!0;var i=n(9),a=n(13),u=n(3),c=n(0),d=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.actionFromJSON=function(t){var e=new this(t[c.MessageConstatnts.KEYS.RECEIVER],t[c.MessageConstatnts.KEYS.TYPE],t[c.MessageConstatnts.KEYS.RECEIVER_TYPE],c.MessageCategory.ACTION),n=t[c.MessageConstatnts.KEYS.DATA];if(e.data=n,e.setAction(n[c.MessageConstatnts.KEYS.ACTION]),n[c.MessageConstatnts.KEYS.METADATA]&&e.setMetadata(n[c.MessageConstatnts.KEYS.METADATA]),n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])if(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==c.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var r=new u.User(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(r,n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionBy=r,e.setSender(r)}else{var s=new a.Group("","","");Object.assign(s,n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionBy=s}if(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR])if(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==c.ActionConstatnts.ACTION_ENTITY_TYPE.USER){r=new u.User(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(r,n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionFor=r}else{s=new a.Group("","","");Object.assign(s,n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionFor=s}if(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON])if(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==c.ActionConstatnts.ACTION_ENTITY_TYPE.USER){r=new u.User(n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(r,n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionOn=r}else{s=new a.Group("","","");Object.assign(s,n[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionOn=s}return e.setMessage(e.getActionMessage(e)),e},e.prototype.setRawData=function(t){this.rawData=t},e.prototype.getRawData=function(){return this.rawData},e.prototype.setMessage=function(t){this.message=t},e.prototype.getMessage=function(){return this.message},e.prototype.setAction=function(t){this.action=t},e.prototype.getAction=function(){return this.action},e.prototype.getSender=function(){return this.getSenderFromData()},e.prototype.setActionBy=function(t){this.actionBy=t},e.prototype.getActionBy=function(){return this.actionBy},e.prototype.setActionOn=function(t){this.actionOn=t},e.prototype.getActionOn=function(){return this.actionOn},e.prototype.setActionFor=function(t){this.actionFor=t},e.prototype.getActionFor=function(){return this.actionFor},e.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},e.prototype.setMetadata=function(t){this.metadata=t,this.data=o({},this.data,{metadata:t})},e.prototype.getActionMessage=function(t){var e="";switch(t.getType()){case c.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_USER:case c.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP:switch(t.getAction()){case c.ActionConstatnts.ACTION_KEYS.ACTION_CREATED:case c.ActionConstatnts.ACTION_KEYS.ACTION_UPDATED:case c.ActionConstatnts.ACTION_KEYS.ACTION_DELETED:}break;case c.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP_MEMBER:switch(t.getAction()){case c.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_JOINED:var n=t.getActionBy(),r=t.getActionFor();e=d.format(c.ActionConstatnts.ActionMessages.ACTION_GROUP_JOINED_MESSAGE,n.getName(),r.getName());break;case c.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_LEFT:n=t.getActionBy(),r=t.getActionFor();e=d.format(c.ActionConstatnts.ActionMessages.ACTION_GROUP_LEFT_MESSAGE,n.getName(),r.getName());break;case c.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_KICKED:n=t.getActionBy(),r=t.getActionFor();var s=t.getActionOn();e=d.format(c.ActionConstatnts.ActionMessages.ACTION_MEMBER_KICKED_MESSAGE,n.getName(),s,r.getName());break;case c.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_BANNED:n=t.getActionBy(),r=t.getActionFor(),s=t.getActionOn();e=d.format(c.ActionConstatnts.ActionMessages.ACTION_MEMBER_BANNED_MESSAGE,n.getName(),r.getName());break;case c.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_UNBANNED:n=t.getActionBy(),r=t.getActionFor(),s=t.getActionOn();e=d.format(c.ActionConstatnts.ActionMessages.ACTION_MEMBER_UNBANNED_MESSAGE,n.getName(),r.getName());break;case c.ActionConstatnts.ACTION_KEYS.ACTION_SCOPE_CHANGED:}}return e},e.prototype.getSenderFromData=function(){var t=this.data;if(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY]&&t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==c.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var e=new u.User(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.ActionConstatnts.ACTION_KEYS.ENTITY]);return Object.assign(e,t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.ActionConstatnts.ACTION_KEYS.ENTITY]),e}},e.TYPE=c.MessageConstatnts.TYPE,e.RECEIVER_TYPE=c.MessageConstatnts.RECEIVER_TYPE,e.CATEGORY=c.MessageConstatnts.CATEGORY,e.ACTION_TYPE=c.ActionConstatnts.ACTION_TYPE,e}(i.BaseMessage);e.Action=l},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),s=function(){function t(t,e,n,r,s,o){this.hasJoined=!1,this.guid=t,this.name=e,this.type=n,r&&(this.password=r),s&&(this.icon=s),o&&(this.description=o)}return t.prototype.getGuid=function(){return this.guid},t.prototype.setGuid=function(t){this.guid=t},t.prototype.getName=function(){return this.name},t.prototype.setName=function(t){this.name=t},t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.setPassword=function(t){this.password=t},t.prototype.getIcon=function(){return this.icon},t.prototype.setIcon=function(t){this.icon=t},t.prototype.getDescription=function(){return this.description},t.prototype.setDescription=function(t){this.description=t},t.prototype.getOwner=function(){return this.owner},t.prototype.setOwner=function(t){this.owner=t},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(t){this.metadata=t},t.prototype.getCreatedAt=function(){return this.createdAt},t.prototype.setCreatedAt=function(t){this.createdAt=t},t.prototype.getUpdatedAt=function(){return this.updatedAt},t.prototype.setUpdatedAt=function(t){this.updatedAt=t},t.prototype.getHasJoined=function(){return this.hasJoined},t.prototype.setHasJoined=function(t){this.hasJoined=t},t.prototype.getWsChannel=function(){return this.wsChannel},t.prototype.setWsChannel=function(t){this.wsChannel=t},t.TYPE=r.GroupType,t.Type=t.TYPE,t}();e.Group=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};e.__esModule=!0;var s=n(9),a=n(0),u=n(1),c=n(3),d=function(s){function t(t,e,n,r){return u.isFalsy(r)?s.call(this,t,e,n,a.MessageCategory.CALL)||this:s.call(this,t,e,n,r)||this}return o(t,s),t.prototype.getCallInitiator=function(){return this.getCallInitiatedByFromData()},t.prototype.getCallReceiver=function(){return this.getCallReceivedByFromData()},t.prototype.setCallInitiator=function(t){this.callInitiator=t},t.prototype.setCallReceiver=function(t){this.callReceiver=t},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.getSessionId=function(){return this.sessionId},t.prototype.setSessionId=function(t){this.sessionId=t},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.getSender=function(){return this.getSenderFromData()},t.prototype.setMetadata=function(t){this.metadata=t,this.data=i({},this.data,{metadata:t})},t.prototype.getAction=function(){return this.action},t.prototype.setAction=function(t){this.action=t},t.prototype.getInitiatedAt=function(){return this.initiatedAt},t.prototype.setInitiatedAt=function(t){this.initiatedAt=t},t.prototype.setRawData=function(t){this.rawData=t},t.prototype.getRawData=function(){return this.rawData},t.callFromJSON=function(t){var e=new this(t[a.MessageConstatnts.KEYS.RECEIVER],t[a.MessageConstatnts.KEYS.TYPE],t[a.MessageConstatnts.KEYS.RECEIVER_TYPE],a.MessageCategory.CALL),n=t[a.MessageConstatnts.KEYS.DATA];if(e.setAction(n[a.MessageConstatnts.KEYS.ACTION]),n[a.MessageConstatnts.KEYS.METADATA]&&e.setMetadata(n[a.MessageConstatnts.KEYS.METADATA]),n[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])n[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY];if(n[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]){var r=n[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON];if(r[a.CallConstants.CALL_KEYS.CALL_ENTITY]){var s=r[a.CallConstants.CALL_KEYS.CALL_ENTITY];if(s[a.CallConstants.CALL_KEYS.CALL_SESSION_ID]&&(e.sessionId=s[a.CallConstants.CALL_KEYS.CALL_SESSION_ID]),s[a.CallConstants.CALL_KEYS.CALL_STATUS]&&(e.status=s[a.CallConstants.CALL_KEYS.CALL_STATUS]),s[a.CallConstants.CALL_KEYS.CALL_DATA]){var o=s[a.CallConstants.CALL_KEYS.CALL_DATA];if(o[a.CallConstants.CALL_KEYS.CALL_METADATA]&&(e.metadata=o[a.CallConstants.CALL_KEYS.CALL_METADATA]),o[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES])o[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES]}s[a.CallConstants.CALL_KEYS.CALL_INITIATED_AT]&&(e.initiatedAt=s[a.CallConstants.CALL_KEYS.CALL_INITIATED_AT])}}return e},t.prototype.getSenderFromData=function(){var t=this.getData();if(t[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][a.CallConstants.CALL_KEYS.CALL_ENTITY])return new c.User(t[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][a.CallConstants.CALL_KEYS.CALL_ENTITY])},t.prototype.getCallInitiatedByFromData=function(){var t=this.getData();if(t[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][a.CallConstants.CALL_KEYS.CALL_ENTITY][a.CallConstants.CALL_KEYS.CALL_DATA][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.CallConstants.CALL_KEYS.CALL_SENDER])return new c.User(t[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][a.CallConstants.CALL_KEYS.CALL_ENTITY][a.CallConstants.CALL_KEYS.CALL_DATA][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.CallConstants.CALL_KEYS.CALL_SENDER][a.CallConstants.CALL_KEYS.CALL_ENTITY])},t.prototype.getCallReceivedByFromData=function(){var t=this.getData();if(t[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][a.CallConstants.CALL_KEYS.CALL_ENTITY][a.CallConstants.CALL_KEYS.CALL_DATA][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.CallConstants.CALL_KEYS.CALL_SENDER])return new c.User(t[a.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][a.CallConstants.CALL_KEYS.CALL_ENTITY][a.CallConstants.CALL_KEYS.CALL_DATA][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.CallConstants.CALL_KEYS.CALL_RECEIVER][a.CallConstants.CALL_KEYS.CALL_ENTITY])},t.TYPE=a.MessageConstatnts.TYPE,t.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=a.MessageConstatnts.CATEGORY,t.ACTION_TYPE=a.ActionConstatnts.ACTION_TYPE,t}(s.BaseMessage);e.Call=d},function(t,e,n){"use strict";e.__esModule=!0;var i=n(1),a=n(32),u=n(2),r=n(8),c=n(16),d=n(0),l=n(24),h=(n(36),n(37),n(38),n(12)),f=n(11),s=n(10),p=n(39),_=n(14),g=n(20),m=n(6),o=function(){function o(){this.messageHandlers=[],this.userHandlers=[],this.callHandlers=[],this.groupHandlers=[],this.iqHandlers=[]}return o.getInstance=function(){return null!=this.xMPPConnectionHelper&&null!=this.xMPPConnectionHelper||(this.xMPPConnectionHelper=new o),this.xMPPConnectionHelper},o.prototype.XMPPConnect=function(n){var r=this;return new Promise(function(e,t){i.isFalsy(n)&&(n=o.XMPP_BIND_URL),m.LocalStorage.getInstance().get(d.APP_SETTINGS.APP_SETTINGS).then(function(t){i.isFalsy(t)?u.CometChat.getAppSettings().then(function(t){o.XMPP_BIND_URL="wss://"+t[d.APP_SETTINGS.KEYS.XMPP_HOST]+":"+t[d.APP_SETTINGS.KEYS.XMPP_HTTPS_BIND_PORT]+d.XMPP.bind_url,r.connection=new a.Strophe.Connection(o.XMPP_BIND_URL),e(!0)}):(o.XMPP_BIND_URL="wss://"+t[d.APP_SETTINGS.KEYS.XMPP_HOST]+":"+t[d.APP_SETTINGS.KEYS.XMPP_HTTPS_BIND_PORT]+d.XMPP.bind_url,r.connection=new a.Strophe.Connection(o.XMPP_BIND_URL),e(!0))})})},o.prototype.XMPPDisconnect=function(){this.connection.flush(),this.connection.disconnect()},o.prototype.XMMPLogin=function(e,n,r){var s=this;void 0===n&&(n=d.XMPP.deafult_password),this.XMPPConnect().then(function(t){s.connection.connected?r(a.Strophe.Status.CONNECTED):s.connection.connect(i.format(d.XMPP.jid_string,u.CometChat.getAppId(),e,o.XMPP_HOST,d.XMPP.xmpp_resource),n,function(t){i.isFalsy(r)||r(t),t==a.Strophe.Status.CONNECTED&&(s.connection.sendPresence(a.$pres().c("priority").t("1").up().c("status").t("online")),s.connection.muc.init(s.connection),s.connection.vcard.init(s.connection),s.connection.streamManagement.enable(),s.connection.muc.join(i.format(d.XMPP.muc_jid_string,u.CometChat.getAppId(),"somegroup","call",d.XMPP.host),s.connection.jid),s.connection.muc.listRooms(u.CometChat.getAppId()+"."+d.XMPP.host,function(t){var e=t.getElementsByTagName("item");(e=Array.prototype.slice.call(e)).map(function(t){s.connection.muc.join(t.getAttribute("jid"),s.connection.jid)})}),s.connection.send(a.$iq({from:a.Strophe.getBareJidFromJid(s.connection.jid),id:"enable1",type:"set"}).c("enable",{xmlns:"urn:xmpp:carbons:2"})),s.connection.addHandler(function(t){if(!(0<t.getElementsByTagName("x").length)){var n=l.PresenceController.transformPresence(t);s.getUsersVCard(n.getUid(),function(e){i.isFalsy(e.getUid())||s.userHandlers.map(function(t){if(t)switch(e.setLastActiveAt(n.getLastActiveAt()),n.getStatus()){case d.PresenceConstatnts.STATUS.ONLINE:e.setStatus(d.PresenceConstatnts.STATUS.ONLINE),i.isFalsy(t._eventListener.onUserOnline)||t._eventListener.onUserOnline(e);break;default:e.setStatus(d.PresenceConstatnts.STATUS.OFFLINE),i.isFalsy(t._eventListener.onUserOffline)||t._eventListener.onUserOffline(e)}})})}return!0},null,"presence"),s.connection.addHandler(function(t){var e=t.getElementsByTagName("presence");return 0<(e=Array.prototype.slice.call(e)).length&&s.iqHandlers.map(function(t){t._callback(l.PresenceController.transformPresences(e))}),!0},null,"iq"),s.connection.addHandler(function(e){try{e=c.MessageController.trasformXMPPMessage(e),f.MessagesStore.getInstance().storeMessages([e])}catch(t){}return s.messageHandlers.map(function(t){try{if(t)if(e instanceof h.Action)i.isFalsy(t._eventListener.onAction)||t._eventListener.onAction(e),s.publishActionEvents(e);else if(e instanceof _.Call)switch(e.getStatus()){case d.CallConstants.CALL_STATUS.INITIATED:e.getSender().getUid()!=u.CometChat.user.getUid()&&(s.publishCallEvents(e),i.isFalsy(t._eventListener.onCall)||t._eventListener.onCall(e));break;default:s.publishCallEvents(e),i.isFalsy(t._eventListener.onCall)||t._eventListener.onCall(e)}else{switch(e.getType()){case d.MessageConstatnts.TYPE.TEXT:i.isFalsy(t._eventListener.onTextMessageReceived)||t._eventListener.onTextMessageReceived(e);break;default:i.isFalsy(t._eventListener.onMediaMessageReceived)||t._eventListener.onMediaMessageReceived(e)}}}catch(t){}}),s.callHandlers.map(function(t){if(t&&e instanceof _.Call)switch(e.getStatus()){case d.CallConstants.CALL_STATUS.INITIATED:e.getSender().getUid()!=u.CometChat.user.getUid()&&s.publishCallEvents(e);break;default:s.publishCallEvents(e)}}),!0},null,"message"),s.connection.addHandler(function(t){var e=c.MessageController.trasformXMPPMessage(t);if(e instanceof _.Call){switch(e.getStatus()){case d.CallConstants.CALL_STATUS.INITIATED:case d.CallConstants.CALL_STATUS.ONGOING:case d.CallConstants.CALL_STATUS.UNANSWERED:break;case d.CallConstants.CALL_STATUS.REJECTED:try{e.getReceiverType()==_.Call.RECEIVER_TYPE.GROUP||g.CallController.getInstance().endCallSession()}catch(t){i.Logger.error("CallLog",t)}break;case d.CallConstants.CALL_STATUS.BUSY:case d.CallConstants.CALL_STATUS.CANCELLED:break;case d.CallConstants.CALL_STATUS.ENDED:try{g.CallController.getInstance().onCallEnded()}catch(t){i.Logger.error("CallLog",t)}}}return!0},null,"message"))})})},o.prototype.getPresenceInfo=function(t,e){var n="somename"+(new Date).getTime();this.addIqHandler(n,function(t){e(t)});var r=a.$iq({from:this.connection.jid,id:"CC^COMETCHAT-PRESENCE",type:"get",to:d.XMPP.host}).c("query",{xmlns:"jabber:iq:presencereq",action:"presence"}).t(JSON.stringify(t));this.connection.send(r)},o.prototype.addMessageEventListener=function(t,e){this.messageHandlers=this.messageHandlers.concat([new r.MessageListener(t,e)])},o.prototype.removeMessageEventListener=function(e){this.messageHandlers=this.messageHandlers.filter(function(t){return t._name!==e})},o.prototype.addCallEventListener=function(t,e){this.callHandlers=this.callHandlers.concat([new r.CallListener(t,e)])},o.prototype.removeCallEventListener=function(e){this.callHandlers=this.callHandlers.filter(function(t){return t._name!==e})},o.prototype.addUserEventListener=function(t,e){this.userHandlers=this.userHandlers.concat([new r.UserListener(t,e)])},o.prototype.removeUserEventListener=function(e){this.userHandlers=this.userHandlers.filter(function(t){return t._name!==e})},o.prototype.addGroupEventListener=function(t,e){this.groupHandlers=this.groupHandlers.concat([new r.GroupListener(t,e)])},o.prototype.removeGroupEventListener=function(e){this.groupHandlers=this.groupHandlers.filter(function(t){return t._name!==e})},o.prototype.addIqHandler=function(t,e){this.iqHandlers=this.iqHandlers.concat([new r.Listener(t,e)])},o.prototype.removeIqHandler=function(e){this.iqHandlers=this.iqHandlers.filter(function(t){return t._name!==e})},o.prototype.joinMuc=function(t){this.connection.muc.join(i.format(d.XMPP.muc_jid_string,u.CometChat.getAppId(),t.getGuid(),u.CometChat.getAppId(),d.XMPP.host),this.connection.jid,null,null,null,null,0)},o.prototype.leaveMuc=function(t){this.connection.muc.leave(i.format(d.XMPP.muc_jid_string,u.CometChat.getAppId(),t,u.CometChat.getAppId(),d.XMPP.host),this.connection.jid)},o.prototype.getUsersVCard=function(t,e){this.connection.vcard.get(function(t){e(p.VCardController.transformVCard(t))},s.getJidFromUid(t))},o.prototype.trigerMessageHandler=function(e,t){var n=this;if(i.isFalsy(t))this.messageHandlers.map(function(t){if(e=c.MessageController.trasformJSONMessge(e),t._eventListener)if(e instanceof h.Action)t._eventListener.onAction(e),n.publishActionEvents(e);else if(e instanceof _.Call)n.publishCallEvents(e),t._eventListener.onCall(e);else{switch(e.getType()){case d.MessageConstatnts.TYPE.TEXT:t._eventListener.onTextMessageReceived(e);break;default:t._eventListener.onMediaMessageReceived(e)}}});else if(this.messageHandlers[t]._eventListener)if(e instanceof h.Action)this.messageHandlers[t]._eventListener.onAction(e),this.publishActionEvents(e);else if(e instanceof _.Call)this.publishCallEvents(e),this.messageHandlers[t]._eventListener.onCall(e);else{switch(e.getType()){case d.MessageConstatnts.TYPE.TEXT:this.messageHandlers[t]._eventListener.onTextMessage(e);break;default:this.messageHandlers[t]._eventListener.onMediaMessage(e)}}},o.prototype.publishActionEvents=function(e){switch(e.getAction()){case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_JOINED:this.groupHandlers.map(function(t){i.isFalsy(t._eventListener.onUserJoined)||t._eventListener.onUserJoined(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_INVITED:this.groupHandlers.map(function(t){i.isFalsy(t._eventListener.onUserJoined)||t._eventListener.onUserJoined(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_LEFT:this.groupHandlers.map(function(t){i.isFalsy(t._eventListener.onUserLeft)||t._eventListener.onUserLeft(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_BANNED:this.groupHandlers.map(function(t){i.isFalsy(t._eventListener.onUserBanned)||t._eventListener.onUserBanned(e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_KICKED:this.groupHandlers.map(function(t){i.isFalsy(t._eventListener.onUserKicked)||t._eventListener.onUserKicked(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_UNBANNED:this.groupHandlers.map(function(t){i.isFalsy(t._eventListener.onUserUnbanned)||t._eventListener.onUserUnbanned(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_SCOPE_CHANGED:this.groupHandlers.map(function(t){i.isFalsy(t._eventListener.onMemberScopeChanged)||t._eventListener.onMemberScopeChanged(e)})}},o.prototype.publishCallEvents=function(e){switch(e.getStatus()){case d.CallConstants.CALL_STATUS.INITIATED:this.callHandlers.map(function(t){i.isFalsy(t._eventListener.onIncomingCallReceived)||t._eventListener.onIncomingCallReceived(e)});break;case d.CallConstants.CALL_STATUS.ONGOING:this.callHandlers.map(function(t){i.isFalsy(t._eventListener.onOutgoingCallAccepted)||t._eventListener.onOutgoingCallAccepted(e)});break;case d.CallConstants.CALL_STATUS.UNANSWERED:this.callHandlers.map(function(t){i.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)});break;case d.CallConstants.CALL_STATUS.REJECTED:this.callHandlers.map(function(t){i.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)});break;case d.CallConstants.CALL_STATUS.BUSY:this.callHandlers.map(function(t){i.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)});break;case d.CallConstants.CALL_STATUS.CANCELLED:this.callHandlers.map(function(t){i.isFalsy(t._eventListener.onIncomingCallCancelled)||t._eventListener.onIncomingCallCancelled(e)});break;case d.CallConstants.CALL_STATUS.ENDED:this.callHandlers.map(function(t){i.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)})}},o.XMPP_HOST=d.XMPP.host,o.XMPP_PORT=d.XMPP.port,o.xMPPConnectionHelper=new o,o.XMPP_BIND_URL="wss://"+o.XMPP_HOST+":"+o.XMPP_PORT+d.XMPP.bind_url,o}();e.XMPPConnectionHelper=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(17),s=n(10),o=n(18),c=n(4),i=n(11),d=n(1),a=n(0),l=n(12),h=n(14),f=n(34),u=function(){function u(){}return u.trasformXMPPMessage=function(t){var e={};try{var n=JSON.parse(unescape(s.parseHTML(t.getElementsByTagName("body")[0])).trim().toString());e=this.trasformJSONMessge(n)}catch(t){return e}return e},u.trasformJSONMessge=function(t){var e;switch(t.category){case a.MessageConstatnts.CATEGORY.ACTION:e=l.Action.actionFromJSON(t);break;case a.MessageConstatnts.CATEGORY.CALL:e=h.Call.callFromJSON(t);break;case a.MessageConstatnts.CATEGORY.MESSAGE:switch(t.type){case a.MessageConstatnts.TYPE.TEXT:e=new r.TextMessage(t[a.MessageConstatnts.KEYS.RECEIVER],t[a.MessageConstatnts.KEYS.DATA][a.MessageConstatnts.KEYS.TEXT],t[a.MessageConstatnts.KEYS.TYPE],t[a.MessageConstatnts.KEYS.RECEIVER_TYPE]);break;default:e=new o.MediaMessage(t[a.MessageConstatnts.KEYS.RECEIVER],t[a.MessageConstatnts.KEYS.DATA][a.MessageConstatnts.KEYS.URL],t[a.MessageConstatnts.KEYS.TYPE],t[a.MessageConstatnts.KEYS.RECEIVER_TYPE])}}try{if(Object.assign(e,t),(t=e)instanceof r.TextMessage){t.setSender(t.getSender()),t.getData()[a.MessageConstatnts.KEYS.METADATA]&&t.setMetadata(t.getData()[a.MessageConstatnts.KEYS.METADATA]);try{t.setProcessedText(f.default.parse(t.getText()))}catch(t){}}else t instanceof o.MediaMessage?(t.getData()[a.MessageConstatnts.KEYS.METADATA]&&t.setMetadata(t.getData()[a.MessageConstatnts.KEYS.METADATA]),t.setSender(t.getSender())):t instanceof l.Action?(t.setSender(t.getSender()),t.setActionBy(t.getActionBy()),t.setActionOn(t.getActionOn()),t.setActionFor(t.getActionFor()),t.setMessage(t.getMessage())):t instanceof h.Call&&(t.setSender(t.getSender()),t.setCallInitiator(t.getCallInitiator()),t.setCallReceiver(t.getCallReceiver()))}catch(t){}return t},u.getOfflineHistory=function(t,e){void 0===t&&(t=1e3),void 0===e&&(e=1);var n=i.MessagesStore.getInstance(),r=[];c.makeApiCall("getMessages",{},this.createData(t,e)).then(function(t){return d.isFalsy(t.data)||t.data.map(function(t){r.push(u.trasformJSONMessge(t))}),n.storeMessages(r)})},u.getAllMessage=function(n,r,s,o){var i=this;void 0===n&&(n=100);var a=[];return new Promise(function(e,t){c.makeApiCall("getMessages",{},i.createAllMessageData(n,r,s,o)).then(function(t){d.isFalsy(t.data)||(t.data.map(function(t){a.push(u.trasformJSONMessge(t))}),e(a))},function(t){d.Logger.error("Error on fetching all message",t),e([])})})},u.createData=function(t,e){return void 0===e&&(e=0),{per_page:t,cursorValue:e,cursorField:a.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID,cursorAffix:d.isFalsy(e)?a.MessageConstatnts.PAGINATION.AFFIX.PREPEND:a.MessageConstatnts.PAGINATION.AFFIX.APPEND}},u.createAllMessageData=function(t,e,n,r){return{per_page:t,cursorValue:e,cursorField:n,cursorAffix:r}},u}();e.MessageController=u},function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};e.__esModule=!0;var o=n(9),a=n(0),u=n(3),c=function(o){function t(t,e,n,r){var s=o.call(this,t,n,r,a.MessageCategory.MESSAGE)||this;switch(n){case"text":s.data={text:e},s.text=e}return s}return s(t,o),t.prototype.getSender=function(){return this.getSenderFromData()},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(t){this.metadata=t,this.data=i({},this.data,{metadata:t})},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.getText=function(){return this.text},t.prototype.setText=function(t){this.text=t},t.prototype.setProcessedText=function(t){this.processedText=t},t.prototype.getProcessedText=function(){return this.processedText},t.prototype.getSenderFromData=function(){var t=this.getData();if(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new u.User(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])},t.TYPE=a.MessageConstatnts.TYPE.TEXT,t.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=a.MessageConstatnts.CATEGORY.MESSAGE,t}(o.BaseMessage);e.TextMessage=c},function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};e.__esModule=!0;var o=n(9),a=n(0),u=n(3),c=function(o){function t(t,e,n,r){var s=o.call(this,t,n,r,a.MessageCategory.MESSAGE)||this;return s.data={url:e instanceof File?void 0:e},(s.file=e)instanceof File||(s.url=e),s}return s(t,o),t.prototype.getSender=function(){return this.getSenderFromData()},t.prototype.getUrl=function(){return this.url},t.prototype.setUrl=function(t){this.url=t},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(t){this.metadata=t,this.data=i({},this.data,{metadata:t})},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.getSenderFromData=function(){var t=this.getData();if(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new u.User(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])},t.TYPE=a.MessageConstatnts.TYPE,t.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=a.MessageConstatnts.CATEGORY,t}(o.BaseMessage);e.MediaMessage=c},function(t,e,n){(function(r){t.exports=function s(o,i,a){function u(n,t){if(!i[n]){if(!o[n]){if(c)return c(n,!0);var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}var r=i[n]={exports:{}};o[n][0].call(r.exports,function(t){var e=o[n][1][t];return u(e||t)},r,r.exports,s,o,i,a)}return i[n].exports}for(var c=!1,t=0;t<a.length;t++)u(a[t]);return u}({1:[function(t,d,e){(function(e){"use strict";var n,r,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var s=0,o=new t(c),i=e.document.createTextNode("");o.observe(i,{characterData:!0}),n=function(){i.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var a=new e.MessageChannel;a.port1.onmessage=c,n=function(){a.port2.postMessage(0)}}var u=[];function c(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}d.exports=function(t){1!==u.push(t)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var s=t(1);function c(){}var d={},o=["REJECTED"],i=["FULFILLED"],a=["PENDING"];function r(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,t!==c&&f(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(e,n,r){s(function(){var t;try{t=n(r)}catch(t){return d.reject(e,t)}t===e?d.reject(e,new TypeError("Cannot resolve promise with itself")):d.resolve(e,t)})}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,d.reject(e,t))}function s(t){n||(n=!0,d.resolve(e,t))}var o=p(function(){t(s,r)});"error"===o.status&&r(o.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=r).prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===i||"function"!=typeof e&&this.state===o)return this;var n=new this.constructor(c);if(this.state!==a){var r=this.state===i?t:e;l(n,r,this.outcome)}else this.queue.push(new u(n,t,e));return n},u.prototype.callFulfilled=function(t){d.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){l(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){d.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){l(this.promise,this.onRejected,t)},d.resolve=function(t,e){var n=p(h,e);if("error"===n.status)return d.reject(t,n.value);var r=n.value;if(r)f(t,r);else{t.state=i,t.outcome=e;for(var s=-1,o=t.queue.length;++s<o;)t.queue[s].callFulfilled(e)}return t},d.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},r.resolve=function(t){return t instanceof this?t:d.resolve(new this(c),t)},r.reject=function(t){var e=new this(c);return d.reject(e,t)},r.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,s=!1;if(!r)return this.resolve([]);for(var o=new Array(r),i=0,e=-1,a=new this(c);++e<r;)u(t[e],e);return a;function u(t,e){n.resolve(t).then(function(t){o[e]=t,++i!==r||s||(s=!0,d.resolve(a,o))},function(t){s||(s=!0,d.reject(a,t))})}},r.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s,o=-1,i=new this(c);++o<n;)s=t[o],e.resolve(s).then(function(t){r||(r=!0,d.resolve(i,t))},function(t){r||(r=!0,d.reject(i,t))});return i}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(t){if("TypeError"!==t.name)throw t;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,s=new r,o=0;o<e.length;o+=1)s.append(e[o]);return s.getBlob(n.type)}}"undefined"==typeof Promise&&t(3);var l=Promise;function h(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function c(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function d(t){return"string"!=typeof t&&(t=String(t)),t}function o(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var a="local-forage-detect-blob-support",s=void 0,f={},p=Object.prototype.toString,_="readonly",g="readwrite";function m(t){return"boolean"==typeof s?l.resolve(s):(r=t,new l(function(n){var t=r.transaction(a,g),e=i([""]);t.objectStore(a).put(e,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),n(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);n(e||!t||43<=parseInt(t[1],10))}}).catch(function(){return!1})).then(function(t){return s=t});var r}function E(t){var e=f[t.name],n={};n.promise=new l(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function C(t){var e=f[t.name],n=e.deferredOperations.pop();if(n)return n.resolve(),n.promise}function S(t,e){var n=f[t.name],r=n.deferredOperations.pop();if(r)return r.reject(e),r.promise}function A(s,o){return new l(function(t,e){if(f[s.name]=f[s.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},s.db){if(!o)return t(s.db);E(s),s.db.close()}var n=[s.name];o&&n.push(s.version);var r=u.open.apply(u,n);o&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(s.storeName),t.oldVersion<=1&&e.createObjectStore(a)}catch(t){if("ConstraintError"!==t.name)throw t}}),r.onerror=function(t){t.preventDefault(),e(r.error)},r.onsuccess=function(){t(r.result),C(s)}})}function T(t){return A(t,!1)}function v(t){return A(t,!0)}function y(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,s=t.version>t.db.version;if(r&&(t.version,t.version=t.db.version),s||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function I(t){var e=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),s=0;s<e;s++)r[s]=t.charCodeAt(s);return n}(atob(t.data));return i([e],{type:t.type})}function N(t){return t&&t.__local_forage_encoded_blob}function b(t){var e=this,n=e._initReady().then(function(){var t=f[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return c(n,t,t),n}function O(e,n,r,s){void 0===s&&(s=1);try{var t=e.db.transaction(e.storeName,n);r(null,t)}catch(t){if(0<s&&(!e.db||"InvalidStateError"===t.name||"NotFoundError"===t.name))return l.resolve().then(function(){if(!e.db||"NotFoundError"===t.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),v(e)}).then(function(){return function(n){E(n);for(var r=f[n.name],s=r.forages,t=0;t<s.length;t++){var e=s[t];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return n.db=null,T(n).then(function(t){return n.db=t,y(n)?v(n):t}).then(function(t){n.db=r.db=t;for(var e=0;e<s.length;e++)s[e]._dbInfo.db=t}).catch(function(t){throw S(n,t),t})}(e).then(function(){O(e,n,r,s-1)})}).catch(r);r(t)}}var R={_driver:"asyncStorage",_initStorage:function(t){var r=this,s={db:null};if(t)for(var e in t)s[e]=t[e];var o=f[s.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},f[s.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=b);var n=[];function i(){return l.resolve()}for(var a=0;a<o.forages.length;a++){var u=o.forages[a];u!==r&&n.push(u._initReady().catch(i))}var c=o.forages.slice(0);return l.all(n).then(function(){return s.db=o.db,T(s)}).then(function(t){return s.db=t,y(s,r._defaultConfig.version)?v(s):t}).then(function(t){s.db=o.db=t,r._dbInfo=s;for(var e=0;e<c.length;e++){var n=c[e];n!==r&&(n._dbInfo.db=s.db,n._dbInfo.version=s.version)}})},_support:function(){try{if(!u)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(a,t){var u=this,e=new l(function(o,i){u.ready().then(function(){O(u._dbInfo,_,function(t,e){if(t)return i(t);try{var n=e.objectStore(u._dbInfo.storeName),r=n.openCursor(),s=1;r.onsuccess=function(){var t=r.result;if(t){var e=t.value;N(e)&&(e=I(e));var n=a(e,t.key,s++);void 0!==n?o(n):t.continue()}else o()},r.onerror=function(){i(r.error)}}catch(t){i(t)}})}).catch(i)});return h(e,t),e},getItem:function(i,t){var a=this;i=d(i);var e=new l(function(s,o){a.ready().then(function(){O(a._dbInfo,_,function(t,e){if(t)return o(t);try{var n=e.objectStore(a._dbInfo.storeName),r=n.get(i);r.onsuccess=function(){var t=r.result;void 0===t&&(t=null),N(t)&&(t=I(t)),s(t)},r.onerror=function(){o(r.error)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},setItem:function(a,e,t){var u=this;a=d(a);var n=new l(function(o,i){var t;u.ready().then(function(){return t=u._dbInfo,"[object Blob]"===p.call(e)?m(t.db).then(function(t){return t?e:(r=e,new l(function(n,t){var e=new FileReader;e.onerror=t,e.onloadend=function(t){var e=btoa(t.target.result||"");n({__local_forage_encoded_blob:!0,data:e,type:r.type})},e.readAsBinaryString(r)}));var r}):e}).then(function(s){O(u._dbInfo,g,function(t,e){if(t)return i(t);try{var n=e.objectStore(u._dbInfo.storeName);null===s&&(s=void 0);var r=n.put(s,a);e.oncomplete=function(){void 0===s&&(s=null),o(s)},e.onabort=e.onerror=function(){var t=r.error?r.error:r.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return h(n,t),n},removeItem:function(i,t){var a=this;i=d(i);var e=new l(function(s,o){a.ready().then(function(){O(a._dbInfo,g,function(t,e){if(t)return o(t);try{var n=e.objectStore(a._dbInfo.storeName),r=n.delete(i);e.oncomplete=function(){s()},e.onerror=function(){o(r.error)},e.onabort=function(){var t=r.error?r.error:r.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},clear:function(t){var i=this,e=new l(function(s,o){i.ready().then(function(){O(i._dbInfo,g,function(t,e){if(t)return o(t);try{var n=e.objectStore(i._dbInfo.storeName),r=n.clear();e.oncomplete=function(){s()},e.onabort=e.onerror=function(){var t=r.error?r.error:r.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},length:function(t){var i=this,e=new l(function(s,o){i.ready().then(function(){O(i._dbInfo,_,function(t,e){if(t)return o(t);try{var n=e.objectStore(i._dbInfo.storeName),r=n.count();r.onsuccess=function(){s(r.result)},r.onerror=function(){o(r.error)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},key:function(a,t){var u=this,e=new l(function(o,i){a<0?o(null):u.ready().then(function(){O(u._dbInfo,_,function(t,e){if(t)return i(t);try{var n=e.objectStore(u._dbInfo.storeName),r=!1,s=n.openCursor();s.onsuccess=function(){var t=s.result;t?0===a?o(t.key):r?o(t.key):(r=!0,t.advance(a)):o(null)},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return h(e,t),e},keys:function(t){var a=this,e=new l(function(o,i){a.ready().then(function(){O(a._dbInfo,_,function(t,e){if(t)return i(t);try{var n=e.objectStore(a._dbInfo.storeName),r=n.openCursor(),s=[];r.onsuccess=function(){var t=r.result;t?(s.push(t.key),t.continue()):o(s)},r.onerror=function(){i(r.error)}}catch(t){i(t)}})}).catch(i)});return h(e,t),e},dropInstance:function(a,t){t=o.apply(this,arguments);var e,n=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),a.name){var r=a.name===n.name&&this._dbInfo.db,s=r?l.resolve(this._dbInfo.db):T(a).then(function(t){var e=f[a.name],n=e.forages;e.db=t;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=t;return t});e=a.storeName?s.then(function(t){if(t.objectStoreNames.contains(a.storeName)){var s=t.version+1;E(a);var r=f[a.name],o=r.forages;t.close();for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=null,n._dbInfo.version=s}var i=new l(function(e,n){var r=u.open(a.name,s);r.onerror=function(t){var e=r.result;e.close(),n(t)},r.onupgradeneeded=function(){var t=r.result;t.deleteObjectStore(a.storeName)},r.onsuccess=function(){var t=r.result;t.close(),e(t)}});return i.then(function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,C(n._dbInfo)}}).catch(function(t){throw(S(a,t)||l.resolve()).catch(function(){}),t})}}):s.then(function(t){E(a);var r=f[a.name],s=r.forages;t.close();for(var e=0;e<s.length;e++){var n=s[e];n._dbInfo.db=null}var o=new l(function(e,n){var r=u.deleteDatabase(a.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}});return o.then(function(t){r.db=t;for(var e=0;e<s.length;e++){var n=s[e];C(n._dbInfo)}}).catch(function(t){throw(S(a,t)||l.resolve()).catch(function(){}),t})})}else e=l.reject("Invalid arguments");return h(e,t),e}},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",w=P.length,D="arbf",x="blob",U=w+D.length,Y=Object.prototype.toString;function G(t){var e,n,r,s,o,i=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(i--,"="===t[t.length-2]&&i--);var c=new ArrayBuffer(i),d=new Uint8Array(c);for(e=0;e<a;e+=4)n=M.indexOf(t[e]),r=M.indexOf(t[e+1]),s=M.indexOf(t[e+2]),o=M.indexOf(t[e+3]),d[u++]=n<<2|r>>4,d[u++]=(15&r)<<4|s>>2,d[u++]=(3&s)<<6|63&o;return c}function F(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=M[n[e]>>2],r+=M[(3&n[e])<<4|n[e+1]>>4],r+=M[(15&n[e+1])<<2|n[e+2]>>6],r+=M[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var B={serialize:function(e,n){var t="";if(e&&(t=Y.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===Y.call(e.buffer))){var r,s=P;e instanceof ArrayBuffer?(r=e,s+=D):(r=e.buffer,"[object Int8Array]"===t?s+="si08":"[object Uint8Array]"===t?s+="ui08":"[object Uint8ClampedArray]"===t?s+="uic8":"[object Int16Array]"===t?s+="si16":"[object Uint16Array]"===t?s+="ur16":"[object Int32Array]"===t?s+="si32":"[object Uint32Array]"===t?s+="ui32":"[object Float32Array]"===t?s+="fl32":"[object Float64Array]"===t?s+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(s+F(r))}else if("[object Blob]"===t){var o=new FileReader;o.onload=function(){var t="~~local_forage_type~"+e.type+"~"+F(this.result);n(P+x+t)},o.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(t){n(null,t)}},deserialize:function(t){if(t.substring(0,w)!==P)return JSON.parse(t);var e,n=t.substring(U),r=t.substring(w,U);if(r===x&&L.test(n)){var s=n.match(L);e=s[1],n=n.substring(s[0].length)}var o=G(n);switch(r){case D:return o;case x:return i([o],{type:e});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:G,bufferToString:F};function k(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function j(t,r,s,o,i,a){t.executeSql(s,o,i,function(t,n){n.code===n.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(t,e){e.rows.length?a(t,n):k(t,r,function(){t.executeSql(s,o,i,a)},a)},a):a(t,n)},a)}function q(i,t,a,u){var c=this;i=d(i);var e=new l(function(s,o){c.ready().then(function(){void 0===t&&(t=null);var n=t,r=c._dbInfo;r.serializer.serialize(t,function(e,t){t?o(t):r.db.transaction(function(t){j(t,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[i,e],function(){s(n)},function(t,e){o(e)})},function(t){if(t.code===t.QUOTA_ERR){if(0<u)return void s(q.apply(c,[i,n,a,u-1]));o(t)}})})}).catch(o)});return h(e,a),e}var H={_driver:"webSQLStorage",_initStorage:function(t){var r=this,s={db:null};if(t)for(var e in t)s[e]="string"!=typeof t[e]?t[e].toString():t[e];var n=new l(function(e,n){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(t){return n(t)}s.db.transaction(function(t){k(t,s,function(){r._dbInfo=s,e()},function(t,e){n(e)})},n)});return s.serializer=B,n},_support:"function"==typeof openDatabase,iterate:function(c,t){var e=this,n=new l(function(u,n){e.ready().then(function(){var a=e._dbInfo;a.db.transaction(function(t){j(t,a,"SELECT * FROM "+a.storeName,[],function(t,e){for(var n=e.rows,r=n.length,s=0;s<r;s++){var o=n.item(s),i=o.value;if(i&&(i=a.serializer.deserialize(i)),void 0!==(i=c(i,o.key,s+1)))return void u(i)}u()},function(t,e){n(e)})})}).catch(n)});return h(n,t),n},getItem:function(e,t){var o=this;e=d(e);var n=new l(function(s,n){o.ready().then(function(){var r=o._dbInfo;r.db.transaction(function(t){j(t,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],function(t,e){var n=e.rows.length?e.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),s(n)},function(t,e){n(e)})})}).catch(n)});return h(n,t),n},setItem:function(t,e,n){return q.apply(this,[t,e,n,1])},removeItem:function(s,t){var o=this;s=d(s);var e=new l(function(n,r){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){j(t,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[s],function(){n()},function(t,e){r(e)})})}).catch(r)});return h(e,t),e},clear:function(t){var s=this,e=new l(function(n,r){s.ready().then(function(){var e=s._dbInfo;e.db.transaction(function(t){j(t,e,"DELETE FROM "+e.storeName,[],function(){n()},function(t,e){r(e)})})}).catch(r)});return h(e,t),e},length:function(t){var s=this,e=new l(function(r,n){s.ready().then(function(){var e=s._dbInfo;e.db.transaction(function(t){j(t,e,"SELECT COUNT(key) as c FROM "+e.storeName,[],function(t,e){var n=e.rows.item(0).c;r(n)},function(t,e){n(e)})})}).catch(n)});return h(e,t),e},key:function(s,t){var o=this,e=new l(function(r,n){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){j(t,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[s+1],function(t,e){var n=e.rows.length?e.rows.item(0).key:null;r(n)},function(t,e){n(e)})})}).catch(n)});return h(e,t),e},keys:function(t){var r=this,e=new l(function(s,n){r.ready().then(function(){var e=r._dbInfo;e.db.transaction(function(t){j(t,e,"SELECT key FROM "+e.storeName,[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).key);s(n)},function(t,e){n(e)})})}).catch(n)});return h(e,t),e},dropInstance:function(n,t){t=o.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var e,s=this;return h(e=n.name?new l(function(t){var e,o;e=n.name===r.name?s._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?t({db:e,storeNames:[n.storeName]}):t((o=e,new l(function(s,n){o.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).name);s({db:o,storeNames:n})},function(t,e){n(e)})},function(t){n(t)})})))}).then(function(a){return new l(function(o,i){a.db.transaction(function(r){function t(e){return new l(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(t,e){n(e)})})}for(var e=[],n=0,s=a.storeNames.length;n<s;n++)e.push(t(a.storeNames[n]));l.all(e).then(function(){o()}).catch(function(t){i(t)})},function(t){i(t)})})}):l.reject("Invalid arguments"),t),e}};function K(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function J(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||0<localStorage.length}var X={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=K(t,this._defaultConfig),J()?((this._dbInfo=e).serializer=B,l.resolve()):l.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(u,t){var c=this,e=c.ready().then(function(){for(var t=c._dbInfo,e=t.keyPrefix,n=e.length,r=localStorage.length,s=1,o=0;o<r;o++){var i=localStorage.key(o);if(0===i.indexOf(e)){var a=localStorage.getItem(i);if(a&&(a=t.serializer.deserialize(a)),void 0!==(a=u(a,i.substring(n),s++)))return a}}});return h(e,t),e},getItem:function(n,t){var r=this;n=d(n);var e=r.ready().then(function(){var t=r._dbInfo,e=localStorage.getItem(t.keyPrefix+n);return e&&(e=t.serializer.deserialize(e)),e});return h(e,t),e},setItem:function(i,t,e){var a=this;i=d(i);var n=a.ready().then(function(){void 0===t&&(t=null);var o=t;return new l(function(n,r){var s=a._dbInfo;s.serializer.serialize(t,function(t,e){if(e)r(e);else try{localStorage.setItem(s.keyPrefix+i,t),n(o)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}})})});return h(n,e),n},removeItem:function(e,t){var n=this;e=d(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return h(r,t),r},clear:function(t){var r=this,e=r.ready().then(function(){for(var t=r._dbInfo.keyPrefix,e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}});return h(e,t),e},length:function(t){var e=this.keys().then(function(t){return t.length});return h(e,t),e},key:function(n,t){var r=this,e=r.ready().then(function(){var e,t=r._dbInfo;try{e=localStorage.key(n)}catch(t){e=null}return e&&(e=e.substring(t.keyPrefix.length)),e});return h(e,t),e},keys:function(t){var o=this,e=o.ready().then(function(){for(var t=o._dbInfo,e=localStorage.length,n=[],r=0;r<e;r++){var s=localStorage.key(r);0===s.indexOf(t.keyPrefix)&&n.push(s.substring(t.keyPrefix.length))}return n});return h(e,t),e},dropInstance:function(e,t){if(t=o.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,s=this;return h(r=e.name?new l(function(t){e.storeName?t(K(e,s._defaultConfig)):t(e.name+"/")}).then(function(t){for(var e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):l.reject("Invalid arguments"),t),r}},V=function(t,e){for(var n=t.length,r=0;r<n;){if((s=t[r])===(o=e)||"number"==typeof s&&"number"==typeof o&&isNaN(s)&&isNaN(o))return!0;r++}var s,o;return!1},W=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},z={},$={},Q={INDEXEDDB:R,WEBSQL:H,LOCALSTORAGE:X},Z=[Q.INDEXEDDB._driver,Q.WEBSQL._driver,Q.LOCALSTORAGE._driver],tt=["dropInstance"],et=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:Z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rt(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function st(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(W(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var ot=function(){function s(t){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Q)if(Q.hasOwnProperty(e)){var n=Q[e],r=n._driver;this[e]=r,z[r]||this.defineDriver(n)}this._defaultConfig=st({},nt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return s.prototype.config=function(t){if("object"!==(void 0===t?"undefined":r(t)))return"string"==typeof t?this._config[t]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)},s.prototype.defineDriver=function(d,t,e){var n=new l(function(e,n){try{var r=d._driver,t=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!d._driver)return void n(t);for(var s=et.concat("_initStorage"),o=0,i=s.length;o<i;o++){var a=s[o],u=!V(tt,a);if((u||d[a])&&"function"!=typeof d[a])return void n(t)}!function(){for(var t=function(n){return function(){var t=new Error("Method "+n+" is not implemented by the current driver"),e=l.reject(t);return h(e,arguments[arguments.length-1]),e}},e=0,n=tt.length;e<n;e++){var r=tt[e];d[r]||(d[r]=t(r))}}();var c=function(t){z[r],z[r]=d,$[r]=t,e()};"_support"in d?d._support&&"function"==typeof d._support?d._support().then(c,n):c(!!d._support):c(!0)}catch(t){n(t)}});return c(n,t,e),n},s.prototype.driver=function(){return this._driver||null},s.prototype.getDriver=function(t,e,n){var r=z[t]?l.resolve(z[t]):l.reject(new Error("Driver not found."));return c(r,e,n),r},s.prototype.getSerializer=function(t){var e=l.resolve(B);return c(e,t),e},s.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return c(n,t,t),n},s.prototype.setDriver=function(t,e,n){var o=this;W(t)||(t=[t]);var r=this._getSupportedDrivers(t);function i(){o._config.driver=o.driver()}function a(t){return o._extend(t),i(),o._ready=o._initStorage(o._config),o._ready}var s=null!==this._driverSet?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=s.then(function(){var t=r[0];return o._dbInfo=null,o._ready=null,o.getDriver(t).then(function(t){var s;o._driver=t._driver,i(),o._wrapLibraryMethodsWithReady(),o._initDriver=(s=r,function(){var n=0;function r(){for(;n<s.length;){var t=s[n];return n++,o._dbInfo=null,o._ready=null,o.getDriver(t).then(a).catch(r)}i();var e=new Error("No available storage method found.");return o._driverSet=l.reject(e),o._driverSet}return r()})})}).catch(function(){i();var t=new Error("No available storage method found.");return o._driverSet=l.reject(t),o._driverSet}),c(this._driverSet,e,n),this._driverSet},s.prototype.supports=function(t){return!!$[t]},s.prototype._extend=function(t){st(this,t)},s.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var s=t[n];this.supports(s)&&e.push(s)}return e},s.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=et.length;t<e;t++)rt(this,et[t])},s.prototype.createInstance=function(t){return new s(t)},s}(),it=new ot;e.exports=it},{3:3}]},{},[4])(4)}).call(this,n(33))},function(t,e,n){"use strict";e.__esModule=!0;var o=n(0),s=n(15),i=n(1),a=n(2),u=n(24),c=n(5),r=n(8),d=n(6),l=function(){function t(){this.TAG="calling Log",this.callListner=void 0,this.CALL_NO_ANSWER_INTERVAL=45e3,this.view=void 0,this.scrollHight=0,this.scrollHight=0}return t.prototype.getCallListner=function(){return this.callListner},t.prototype.setCallListner=function(t){this.callListner=new r.UserCallListener(t)},t.getInstance=function(){return null!=this.callController&&null!=this.callController||(this.callController=new t),this.callController},t.prototype.getActiveCall=function(){return i.isFalsy(this.call)?null:this.call},t.prototype.initiateCall=function(n){var r=this;return new Promise(function(t,e){i.isFalsy(r.call)?null!=n&&null!=n?(r.call=n,r.joinCallMuc(n.getSessionId()),r.startCallTimer(),t(n)):e(new c.CometChatException(o.CALL_ERROR.ERROR_IN_CALLING)):e(new c.CometChatException(o.CALL_ERROR.CALL_ALREADY_INITIATED))})},t.prototype.onCallInitialized=function(){},t.prototype.joinCall=function(t){i.Logger.log(this.TAG,t)},t.prototype.cancelCall=function(){i.Logger.log(this.TAG,"calceling the call"),this.stopCallTimer()},t.prototype.rejectCall=function(){i.Logger.log(this.TAG,"rejectCall")},t.prototype.sendBusyResponse=function(){i.Logger.log(this.TAG,"sendBusyResponse")},t.prototype.endCall=function(t){var e=this;document.getElementsByName("frame").forEach(function(t){e.view.removeChild(t),e.view=void 0}),this.endCallSession()},t.prototype.onCallEnded=function(){var e=this;i.isFalsy(this.call)||(this.call.getReceiverType()==o.CallConstants.RECEIVER_TYPE_GROUP?i.Logger.info(this.TAG,JSON.stringify(this.call)+"This call ended"):(document.getElementsByName("frame").forEach(function(t){e.view.removeChild(t),e.view=void 0}),this.endCallSession()))},t.prototype.unAnswerCall=function(){i.Logger.log(this.TAG,"unAnswerCall")},t.prototype.onCallStarted=function(n){var r=this;return new Promise(function(t,e){i.isFalsy(r.call)?null!=n&&null!=n?(r.call=n,r.joinCallMuc(n.getSessionId()),t(n)):e(new c.CometChatException(o.CALL_ERROR.ERROR_IN_CALLING)):e(new c.CometChatException(o.CALL_ERROR.CALL_ALREADY_INITIATED))})},t.prototype.endCallSession=function(){try{this.leaveCallMuc(this.call.getSessionId()),this.call=void 0,t.callController=void 0,this.timer&&this.stopCallTimer(),this.view=void 0}catch(t){}},t.prototype.joinCallMuc=function(t){var r=this;s.XMPPConnectionHelper.getInstance().connection.muc.join(i.format(o.XMPP.muc_jid_string,a.CometChat.getAppId(),t,a.CometChat.getAppId(),"call."+o.XMPP.host),s.XMPPConnectionHelper.getInstance().connection.jid,null,function(e){try{u.PresenceController.transformMUCUserPresence(e);var n=u.PresenceController.transformPresence(e);s.XMPPConnectionHelper.getInstance().getUsersVCard(n.getUid(),function(t){if(!i.isFalsy(t.getUid()))switch(t.setLastActiveAt(n.getLastActiveAt()),n.getStatus()){case o.PresenceConstatnts.STATUS.ONLINE:t.setStatus(o.PresenceConstatnts.STATUS.ONLINE);break;default:t.setStatus(o.PresenceConstatnts.STATUS.OFFLINE)}switch(u.PresenceController.transformMUCUserPresence(e).getStatus()){case o.PresenceConstatnts.STATUS.JOINED:r.callListner&&(i.isFalsy(r.callListner._eventListener.onUserJoined)||r.callListner._eventListener.onUserJoined(t));break;case o.PresenceConstatnts.STATUS.LEFT:r.callListner&&(i.isFalsy(r.callListner._eventListener.onUserLeft)||r.callListner._eventListener.onUserLeft(t))}})}catch(t){}return!0})},t.prototype.leaveCallMuc=function(t){s.XMPPConnectionHelper.getInstance().connection.muc.leave(i.format(o.XMPP.muc_jid_string,a.CometChat.getAppId(),t,a.CometChat.getAppId(),"call."+o.XMPP.host),s.XMPPConnectionHelper.getInstance().connection.jid)},t.prototype.startCallTimer=function(){var e=this;this.timer=setTimeout(function(){a.CometChat.sendUnansweredResponse(e.call.getSessionId()).then(function(t){e.endCallSession()})},this.CALL_NO_ANSWER_INTERVAL)},t.prototype.stopCallTimer=function(){clearTimeout(this.timer)},t.prototype.startCall=function(e,t){var n=this;if(null==this.view){this.timer&&this.stopCallTimer(),i.isFalsy(t)||this.setCallListner(t);var r=document.createElement("iframe");this.getCallUrl(this.call.getType()).then(function(t){r.src=t+"",r.name="frame",r.setAttribute("allow","camera,microphone"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),e&&(n.view=e),e.appendChild(r),window.addEventListener("message",function(t){"hangup"==t.data.type&&(i.Logger.info(n.TAG,n.callListner),n.callListner&&n.callListner._eventListener.onCallEnded(),i.Logger.info(n.TAG,"EndCall Clicked"),i.Logger.info(n.TAG,n.call.getSessionId()),a.CometChat.rejectCall(n.call.getSessionId(),o.CallConstants.CALL_STATUS.ENDED).then(function(t){i.Logger.info(n.TAG,{call:t})}).catch(function(t){i.Logger.info(n.TAG,"The Call Was Already Ended")}))})})}},t.prototype.getCallUrl=function(n){var r=this,s=void 0;return new Promise(function(e,t){d.LocalStorage.getInstance().get(o.APP_SETTINGS.APP_SETTINGS).then(function(t){i.isFalsy(t)?a.CometChat.getAppSettings().then(function(t){s="https://"+t[o.APP_SETTINGS.KEYS.WEBRTC_HOST],s=n==o.CallConstants.CALL_TYPE_AUDIO?s+"/"+r.call.getSessionId()+"#config.startWithVideoMuted=true&config.startWithAudioMuted=true":s+"/"+r.call.getSessionId()+"#config.startWithAudioMuted=true&config.startWithAudioMuted=true",e(s)}):(s="https://"+t[o.APP_SETTINGS.KEYS.WEBRTC_HOST],s=n==o.CallConstants.CALL_TYPE_AUDIO?s+"/"+r.call.getSessionId()+"#config.startWithVideoMuted=true&config.startWithAudioMuted=true":s+"/"+r.call.getSessionId()+"#config.startWithAudioMuted=true&config.startWithAudioMuted=true",e(s))})})},t.prototype.destroy=function(){i.isFalsy(this.call)||(this.call=void 0),i.isFalsy(this.timer)||(this.timer=void 0),i.isFalsy(this.view)||(this.view=void 0)},t.callController=void 0,t}();e.CallController=l},function(t,e,n){"use strict";e.__esModule=!0;var r=n(22),s=n(17),o=n(18),i=n(28),a=n(13),u=n(29),c=n(3),d=n(2),l=n(8),h=n(30),f=n(12),p=n(0);e.GROUP_MEMBER_SCOPE=p.GROUP_MEMBER_SCOPE,e.GROUP_TYPE=p.GROUP_TYPE;var _=n(14);e.init=function(t){return d.CometChat.getInstance(t)},e.CometChat=d.CometChat,e.TextMessage=s.TextMessage,e.MediaMessage=o.MediaMessage,e.Action=f.Action,e.Call=_.Call,e.Group=a.Group,e.AppUser=c.User,e.UserMessagesRequest=i.MessagesRequest,e.UserMessagesRequestBuilder=i.DefaultMessagesRequestBuilder,e.GroupMessagesRequest=i.MessagesRequest,e.GroupMessagesRequestBuilder=i.DefaultGroupMessagesRequestBuilder,e.MessagesRequest=i.MessagesRequest,e.MessagesRequestBuilder=i.DefaultMessagesRequestBuilder,e.UsersRequest=r.UsersRequest,e.UsersRequestBuilder=r.UsersRequestBuilder,e.GroupsRequest=u.GroupsRequest,e.GroupsRequestBuilder=u.GroupsRequestBuilder,e.GroupMembersRequest=h.GroupMembersRequest,e.GroupMembersRequestBuilder=h.GroupMembersRequestBuilder,e.BannedMembersRequest=h.GroupMembersRequest,e.BannedMembersRequestBuilder=h.GroupOutCastMembersRequestBuilder,e.MessageListener=l.MessageEventListener,e.UserListener=l.UserEventListener,e.GroupListener=l.GroupEventListener,e.OngoingCallListener=l.UserCallEventListener,e.CallListener=l.CallEventListener,e.MESSAGE_TYPE=p.MessageConstatnts.TYPE,e.CATEGORY_MESSAGE=p.MessageConstatnts.CATEGORY.MESSAGE,e.CATEGORY_ACTION=p.MessageConstatnts.CATEGORY.ACTION,e.CATEGORY_CALL=p.MessageConstatnts.CATEGORY.CALL,e.ACTION_TYPE=p.ActionConstatnts.ACTIONS,e.CALL_TYPE=p.CallConstants.CALL_TYPE,e.RECEIVER_TYPE=p.MessageConstatnts.RECEIVER_TYPE,e.CALL_STATUS=p.CallConstants.CALL_STATUS;var g=n(20);e.CallController=g.CallController,e.MESSAGE_REQUEST=p.MessageConstatnts.PAGINATION.CURSOR_FILEDS},function(t,e,n){"use strict";e.__esModule=!0;var i=n(4),a=n(1),r=n(6),u=n(25),c=n(5),s=n(27),d=n(15),l=n(0),h=n(2),o=function(){function o(t){this.limit=o.DEFAULT_LIMIT,this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},this.store=r.LocalStorage.getInstance(),o.userStore=s.UserStore.getInstance(),a.isFalsy(t)||(this.limit=t.limit,this.search_keyword=t.searchKeyWord)}return o.prototype.fetchPrevious=function(){var r=this;return new Promise(function(e,n){if(0!=r.next_page)return i.makeApiCall("users",{},r.getPreData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var n=[];t.data.map(function(t,e){n.push(u.UsersController.trasformJSONUser(t))}),o.userStore.storeUsers(n),e(n)}e([])},function(t){n(new c.CometChatException(t.error))});e([])})},o.prototype.fetchNext=function(){var s=this;return new Promise(function(r,e){i.makeApiCall("users",{},s.getNextData()).then(function(t){if(t.meta&&(s.total_pages=t.meta.pagination.total_pages),0<t.data.length){s.pagination=t.meta.pagination;var e=[],n=[];t.data.map(function(t){e.push(u.UsersController.trasformJSONUser(t)),n.push(a.format(l.XMPP.username_string,h.CometChat.getAppId(),t[l.UserConstants.UID]))}),d.XMPPConnectionHelper.getInstance().getPresenceInfo(n,function(n){e.map(function(t,e){n[e]&&(t.setLastActiveAt(n[e].getLastActiveAt()),t.setStatus(n[e].getStatus()))}),o.userStore.storeUsers(e),r(e)})}else r([])},function(t){e(new c.CometChatException(t.error))})})},o.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,0==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=++this.next_page}return t},o.prototype.getPreData=function(){var t={};return t.per_page=this.limit,0<=this.next_page&&0<this.next_page&&(t.page=--this.next_page),t},o.MAX_LIMIT=2,o.DEFAULT_LIMIT=1,o}();e.UsersRequest=o;var f=function(){function t(){}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyWord=function(t){return this.searchKeyWord=t,this},t.prototype.build=function(){return new o(this)},t}();e.UsersRequestBuilder=f},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){this.baseUrl="https://kohoutek.cometchat.com/",this.apiVersion="v1",this.apiBaseUrl=this.baseUrl+this.apiVersion+"/",this.adminApiUrl="https://api.cometchat.com/",this.adminApiVersion="v1",this.uriEndpoints={authToken:{endpoint:"users/{{uid}}/auth_tokens",method:"POST",data:{uid:"string|max:100"},isAdminApi:!0},appSettings:{endpoint:"settings",method:"GET"},login:{endpoint:"admin/users/auth",method:"POST",data:{uid:"string|max:100"}},logout:{endpoint:"admin/users/auth/{{authToken}}",method:"DELETE"},getMyDetails:{endpoint:"me",method:"GET"},updateMyDetails:{endpoint:"/me",method:"PUT"},users:{endpoint:"users",method:"GET"},user:{endpoint:"users/{{uid}}",method:"GET"},userLogout:{endpoint:"me",method:"DELETE"},sendFriendRequests:{endpoint:"user/friends",method:"POST",data:{uids:"array<string|max:100>"}},getFriends:{endpoint:"user/friends",method:"GET"},unfriend:{endpoint:"user/friends/{{uid}}/{{gid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},acceptFriendRequest:{endpoint:"user/friends/{{uid}}/accept",method:"PUT",data:{uids:"array<string|max:100>"}},rejectFriendRequest:{endpoint:"user/friends/{{uid}}/reject",method:"DELETE",data:{uids:"array<string|max:100>"}},createGroup:{endpoint:"groups",method:"POST",data:{guid:"required|string|max:100",name:"required|string|max:100",type:"enum|public,protected,password",password:"filled|string|max:100"}},getGroups:{endpoint:"groups",method:"GET"},getGroup:{endpoint:"groups/{{guid}}",method:"GET"},updateGroup:{endpoint:"groups/{{guid}}",method:"PUT"},deleteGroup:{endpoint:"groups/{{guid}}",method:"DELETE"},addGroupMembers:{endpoint:"groups/{{guid}}/members",method:"POST",data:{uids:"array<string|max:100>"}},getGroupMembers:{endpoint:"groups/{{guid}}/members",method:"GET"},joinGroup:{endpoint:"groups/{{guid}}/members",method:"POST"},leaveGroup:{endpoint:"groups/{{guid}}/members",method:"DELETE"},kickGroupMembers:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},changeScopeOfMember:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"PUT",data:{uids:"array<string|max:100>"}},banGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"POST",data:{uids:"array<string|max:100>"}},unbanGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},getBannedGroupMembers:{endpoint:"groups/{{guid}}/bannedusers",method:"GET"},promotemoteGroupMember:{endpoint:"groups/{{guid}}/promote",method:"PUT",data:{uids:"array<string|max:100>"}},demoteGroupMember:{endpoint:"groups/{{guid}}/demote",method:"DELETE",data:{uids:"array<string|max:100>"}},sendMessage:{endpoint:"messages",method:"POST",data:{sender:"array:string:max:100>",isGroupMember:"filled|boolean|bail",data:"required|json"}},getMessages:{endpoint:"messages",method:"GET"},getUserMessages:{endpoint:"users/{{listId}}/messages",method:"GET"},getGroupMessages:{endpoint:"groups/{{listId}}/messages",method:"GET"},getMessage:{endpoint:"user/messages/{{muid}}",method:"GET"},updateMessage:{endpoint:"user/messages/{{muid}}",method:"PUT",data:{data:"required|json"}},deleteMessage:{endpoint:"user/messages/{{muid}}",method:"DELETE"},createCallSession:{endpoint:"calls",method:"POST",data:{}},updateCallSession:{endpoint:"calls/{{sessionid}}",method:"put",data:{}}}}return t.prototype.getEndpointData=function(t){var e=!1;return this.uriEndpoints.hasOwnProperty(t)&&((e=this.uriEndpoints[t]).hasOwnProperty(["isAdminApi"])?e.endpoint=this.adminApiUrl+this.adminApiVersion+"/"+e.endpoint:e.endpoint=this.baseUrl+this.apiVersion+"/"+e.endpoint),e},t}();e.EndpointFactory=r},function(t,e,n){"use strict";e.__esModule=!0;var r=n(35),s=n(0),o=function(){function t(){}return t.transformPresence=function(t){return t.getAttribute("type")?new r.UserPresence(t.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.OFFLINE,(new Date).getTime()):new r.UserPresence(t.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.ONLINE,(new Date).getTime())},t.transformPresences=function(t){var e=[];return t.map(function(t){e.push(new r.UserPresence(t.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),t.getAttribute(s.PresenceConstatnts.XMPP_KEYS.STATUS),t.getAttribute(s.PresenceConstatnts.XMPP_KEYS.LAST_ACTIVE_AT)))}),e},t.transformMUCUserPresence=function(t){return t.getAttribute("type")?new r.UserPresence(t.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.LEFT,(new Date).getTime()):new r.UserPresence(t.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.JOINED,(new Date).getTime())},t.trandformMUCPresence=function(t){0<t.getElementsByTagName("x").length&&this.transformMUCUserPresence(t)},t}();e.PresenceController=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(3),s=n(0),o=function(){function t(){}return t.trasformJSONUser=function(t){var e;try{e=new r.User(t[s.UserConstants.UID]),Object.assign(e,t),t=e}catch(t){}return t},t}();e.UsersController=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(13),s=n(0),o=function(){function t(){}return t.trasformJSONGroup=function(t){var e;try{e=new r.Group(t[s.GroupConstants.KEYS.GUID],t[s.GroupConstants.KEYS.NAME],t[s.GroupConstants.KEYS.NAME]),Object.assign(e,t),t=e}catch(t){}return t},t}();e.GroupsController=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2),s=n(1),o=n(0),i=n(19),a=function(){function t(t){this.store=o.constants.DEFAULT_STORE,s.isFalsy(t)||(this.store=t),this.userStore=i.createInstance({name:s.format(o.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),o.LOCAL_STORE.USERS_STORE)}),this.userStore.setDriver([i.LOCALSTORAGE,i.INDEXEDDB,i.WEBSQL])}return t.getInstance=function(){return null==t.UserStore&&(t.UserStore=new t),t.UserStore},t.prototype.set=function(t,e){return this.userStore.setItem(t,e)},t.prototype.remove=function(t){this.userStore.removeItem(t)},t.prototype.get=function(t){return this.userStore.getItem(t)},t.prototype.clearStore=function(){return this.userStore.clear()},t.prototype.clear=function(t){},t.prototype.selectStore=function(t){this.store=t},t.prototype.storeUsers=function(t){var e=this;return t.map(function(t){e.set(t.getUid(),t)}),!0},t.prototype.storeUser=function(t){return this.set(t.getUid(),t),!0},t}();e.UserStore=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var d=n(4),l=n(16),s=n(1),i=n(11),a=n(0),u=function(){function e(t){this.fetchingInProgress=!1,this.limit=e.DEFAULT_LIMIT,this.cursorValue=0,this.cursorAffix=a.MessageConstatnts.PAGINATION.CURSOR_AFFIX_DEFAULT,this.cursorField=a.MessageConstatnts.PAGINATION.CURSOR_FIELD_DEFAULT,this.isGroupRequest=!1,this.messageStore=i.MessagesStore.getInstance(),s.isFalsy(t)||(this.limit=t.limit,this.listId=t.listId,this.cursorField=t.cursorField,this.cursorValue=t.cursorValue,this.isGroupRequest=t.isGroupRequest)}return e.prototype.fetchPrevious=function(){var c=this;return new Promise(function(a,u){c.fetchingInProgress?(c.fetchingInProgress=!0,u([])):c.messageStore.get(c.listId).then(function(e){c.fetchingInProgress=!0;var t=[];e&&(t=Object.keys(e).filter(function(t){if(parseInt(e[t][c.cursorField])<c.cursorValue)return t}));var n=0,r=[];if(t.reverse().map(function(t){n++,parseInt(c.cursorValue.toString())>=parseInt(e[t][c.cursorField])&&n<=c.limit&&(c.cursorValue=e[t][c.cursorField],c.updateCursor(c.cursorValue),r=r.concat([l.MessageController.trasformJSONMessge(e[t])]))}).length<=c.limit){var s=[],o="getUserMessages",i={listId:c.listId};return c.isGroupRequest&&(o="getGroupMessages"),d.makeApiCall(o,i,c.createData()).then(function(t){0<t.data.length?(t.data.map(function(t){c.updateCursor(t[c.cursorField]),s.push(l.MessageController.trasformJSONMessge(t))}),c.messageStore.storeMessages(s),a(r.concat(s).reverse())):0<r.length?a(r.slice().reverse()):a([]),c.fetchingInProgress=!1},function(t){u(t),c.fetchingInProgress=!1})}a(r.slice().reverse()),c.fetchingInProgress=!1})})},e.prototype.createData=function(){var t={};return t[a.MessageConstatnts.PAGINATION.KEYS.PER_PAGE]=this.limit,t[a.MessageConstatnts.PAGINATION.KEYS.CURSOR_AFFIX]=this.cursorAffix,t[a.MessageConstatnts.PAGINATION.KEYS.CURSOR_FIELD]=this.cursorField,t[a.MessageConstatnts.PAGINATION.KEYS.CURSOR_VALUE]=this.cursorValue,t},e.prototype.updateCursor=function(t){(this.cursorValue>t||0==this.cursorValue)&&(this.cursorValue=t)},e.MAX_LIMIT=1,e.DEFAULT_LIMIT=1,e}();e.MessagesRequest=u;var c=function(){function t(t,e,n){this.isGroupRequest=!1,this.cursorField=n,this.cursorValue=e,this.listId=t}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyWord=function(t){return this.searchKeyWord=t,this},t.prototype.build=function(){return new u(this)},t}(),h=function(e){function t(){var t=e.call(this)||this;return t.isGroupRequest=!1,t.limit=30,t.cursorField=a.MessageConstatnts.PAGINATION.CURSOR_FILEDS.SENT_AT,t.cursorValue=(new Date).getTime(),t}return o(t,e),t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setGUID=function(t){return this.isGroupRequest=!0,this.listId=t,this},t.prototype.setUID=function(t){return this.isGroupRequest=!1,this.listId=t,this},t.prototype.setSearchKeyWord=function(t){return this.searchKeyWord=t,this},t.prototype.build=function(){return new u(this)},t}(e.MessagesRequestBuilder=c);e.DefaultMessagesRequestBuilder=h;var f=function(s){function t(t,e,n){var r=s.call(this,t,e,n)||this;return r.isGroupRequest=!0,r.isGroupRequest=!0,r}return o(t,s),t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.build=function(){return new u(this)},t}(c);e.GroupMessagesRequestBuilder=f;var p=function(n){function t(t){var e=n.call(this)||this;return e.isGroupRequest=!0,e.isGroupRequest=!0,e}return o(t,n),t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.build=function(){return new u(this)},t}(h);e.DefaultGroupMessagesRequestBuilder=p},function(t,e,n){"use strict";e.__esModule=!0;var s=n(4),r=n(1),o=n(5),i=n(26),a=function(){function e(t){this.limit=e.DEFAULT_LIMIT,this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(t)||(this.limit=t.limit,this.search_keyword=t.searchKeyWord)}return e.prototype.fetchPrevious=function(){var r=this;return new Promise(function(e,t){if(0!=r.next_page)return s.makeApiCall("groups",{},r.getPreData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var n=[];t.data.map(function(t,e){n.push(i.GroupsController.trasformJSONGroup(t))}),e(n)}e([])});e([])})},e.prototype.fetchNext=function(){var r=this;return new Promise(function(e,n){s.makeApiCall("getGroups",{},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var n=[];t.data.map(function(t,e){n.push(i.GroupsController.trasformJSONGroup(t))}),e(n)}e([])},function(t){n(new o.CometChatException(t.error))})})},e.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=this.next_page++}return t},e.prototype.getPreData=function(){var t={};return t.per_page=this.limit,0<=this.next_page&&0<this.next_page&&(t.page=--this.next_page),t},e.MAX_LIMIT=2,e.DEFAULT_LIMIT=1,e}();e.GroupsRequest=a;var u=function(){function t(){}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyWord=function(t){return this.searchKeyWord=t,this},t.prototype.build=function(){return new a(this)},t}();e.GroupsRequestBuilder=u},function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var o=n(4),i=n(1),a=n(6),u=n(5),c=n(41),d=function(){function e(t){this.limit=e.DEFAULT_LIMIT,this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.isOutCastReq=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},this.store=a.LocalStorage.getInstance(),i.isFalsy(t)||(this.limit=t.limit,this.guid=t.guid,this.search_keyword=t.searchKeyWord,t instanceof h&&(this.isOutCastReq=t.isOutCastReq))}return e.prototype.fetchPrevious=function(){var r=this;return new Promise(function(n,e){if(0!=r.next_page)return o.makeApiCall(r.isOutCastReq?"getBannedGroupMembers":"getGroupMembers",{guid:r.guid},r.getPreData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var e=[];t.data.map(function(t){e.push(c.GroupMembersController.trasformJSONGroupMember(t))}),n(e)}n([])},function(t){e(new u.CometChatException(t.error))});n([])})},e.prototype.fetchNext=function(){var r=this;return new Promise(function(n,e){o.makeApiCall(r.isOutCastReq?"getBannedGroupMembers":"getGroupMembers",{guid:r.guid},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var e=[];t.data.map(function(t){e.push(c.GroupMembersController.trasformJSONGroupMember(t))}),n(e)}n([])},function(t){e(new u.CometChatException(t.error))})})},e.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=++this.next_page}return t},e.prototype.getPreData=function(){var t={};return t.per_page=this.limit,0<=this.next_page&&0<this.next_page&&(t.page=--this.next_page),t},e.MAX_LIMIT=2,e.DEFAULT_LIMIT=1,e}();e.GroupMembersRequest=d;var l=function(){function t(t){this.guid=t}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyWord=function(t){return this.searchKeyWord=t,this},t.prototype.build=function(){return new d(this)},t}(),h=function(n){function t(t){var e=n.call(this,t)||this;return e.isOutCastReq=!0,e}return s(t,n),t.prototype.build=function(){return new d(this)},t}(e.GroupMembersRequestBuilder=l);e.GroupOutCastMembersRequestBuilder=h},function(t,e,n){"use strict";e.__esModule=!0;var r=n(23);e.getEndPoint=function(s,o){void 0===s&&(s=""),void 0===o&&(o={});var i=new r.EndpointFactory;return new Promise(function(t,e){var n=i.getEndpointData(s);if(n){for(var r in o)n.endpoint=n.endpoint.replace("{{"+r+"}}",o[r]);t(n)}else e({error:"Unknown endPoint name."})})}},function(t,r,e){"use strict";r.__esModule=!0;var n=e(7);r.$iq=n.$iq,r.$build=n.$build,r.$msg=n.$msg,r.$pres=n.$pres,r.Strophe=n.Strophe,r.NS=n.Strophe.NS,r.Status=n.Strophe.Status,window.Strophe=r.Strophe,window.$iq=r.$iq,r.Strophe.addConnectionPlugin("streamManagement",{logging:!0,returnWholeStanza:!1,autoSendCountOnEveryIncomingStanza:!1,requestResponseInterval:5,_c:null,_NS:"urn:xmpp:sm:3",_isStreamManagementEnabled:!1,_serverProcesssedStanzasCounter:null,_clientProcessedStanzasCounter:null,_clientSentStanzasCounter:null,_originalXMLOutput:null,_requestHandler:null,_incomingHandler:null,_requestResponseIntervalCount:0,_unacknowledgedStanzas:[],_acknowledgedStanzaListeners:[],addAcknowledgedStanzaListener:function(t){this._acknowledgedStanzaListeners.push(t)},enable:function(){this._c.send(r.$build("enable",{xmlns:this._NS,resume:!1})),this._c.flush(),this._c.pause()},requestAcknowledgement:function(){this._requestResponseIntervalCount=0,this._c.send(r.$build("r",{xmlns:this._NS}))},getOutgoingCounter:function(){return this._clientSentStanzasCounter},getIncomingCounter:function(){return this._clientProcessedStanzasCounter},init:function(t){this._c=t,r.Strophe.addNamespace("SM",this._NS),this._originalXMLOutput=this._c.xmlOutput,this._c.xmlOutput=this.xmlOutput.bind(this)},statusChanged:function(t){t!==r.Strophe.Status.CONNECTED&&t!==r.Strophe.Status.DISCONNECTED||(this._serverProcesssedStanzasCounter=0,this._clientProcessedStanzasCounter=0,this._clientSentStanzasCounter=0,this._isStreamManagementEnabled=!1,this._requestResponseIntervalCount=0,this._unacknowledgedStanzas=[],this._requestHandler&&this._c.deleteHandler(this._requestHandler),this._incomingHandler&&this._c.deleteHandler(this._incomingHandler),this._requestHandler=this._c.addHandler(this._handleServerRequestHandler.bind(this),this._NS,"r"),this._incomingHandler=this._c.addHandler(this._incomingStanzaHandler.bind(this)))},xmlOutput:function(t){for(var e,n=0;n<t.children.length;n++)e=t.children[n],(r.Strophe.isTagEqual(e,"iq")||r.Strophe.isTagEqual(e,"presence")||r.Strophe.isTagEqual(e,"message"))&&this._increaseSentStanzasCounter(e);return this._originalXMLOutput.call(this._c,t)},_incomingStanzaHandler:function(t){if(r.Strophe.isTagEqual(t,"enabled")&&t.getAttribute("xmlns")===this._NS&&(this._isStreamManagementEnabled=!0,this._c.resume()),(r.Strophe.isTagEqual(t,"iq")||r.Strophe.isTagEqual(t,"presence")||r.Strophe.isTagEqual(t,"message"))&&(this._increaseReceivedStanzasCounter(),this.autoSendCountOnEveryIncomingStanza&&this._answerProcessedStanzas()),r.Strophe.isTagEqual(t,"a")){var e=parseInt(t.getAttribute("h"));this._handleAcknowledgedStanzas(e,this._serverProcesssedStanzasCounter),this._serverProcesssedStanzasCounter=e,0<this.requestResponseInterval&&(this._requestResponseIntervalCount=0)}return!0},_handleAcknowledgedStanzas:function(t,e){var n=t-e;n<0&&this._throwError("New reported stanza count lower than previous. New: "+t+" - Previous: "+e),n>this._unacknowledgedStanzas.length&&this._throwError("Higher reported acknowledge count than unacknowledged stanzas. Reported Acknowledge Count: "+n+" - Unacknowledge Stanza Count: "+this._unacknowledgedStanzas.length+" - New: "+t+" - Previous: "+e);for(var r=0;r<n;r++)for(var s=this._unacknowledgedStanzas.shift(),o=0;o<this._acknowledgedStanzaListeners.length;o++)this._acknowledgedStanzaListeners[o](s);this.logging&&this._unacknowledgedStanzas.length},_handleServerRequestHandler:function(){return this._answerProcessedStanzas(),!0},_answerProcessedStanzas:function(){this._isStreamManagementEnabled&&this._c.send(r.$build("a",{xmlns:this._NS,h:this._clientProcessedStanzasCounter}))},_increaseSentStanzasCounter:function(t){this._isStreamManagementEnabled&&(this._unacknowledgedStanzas.push(this.returnWholeStanza?t:t.getAttribute("id")),this._clientSentStanzasCounter++,0<this.requestResponseInterval&&(this._requestResponseIntervalCount++,this._requestResponseIntervalCount===this.requestResponseInterval&&this.requestAcknowledgement()))},_increaseReceivedStanzasCounter:function(){this._isStreamManagementEnabled&&this._clientProcessedStanzasCounter++},_throwError:function(t){throw new Error(t)}})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=function(){var r={base:"https://twemoji.maxcdn.com/2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(t){var e="string"==typeof t?parseInt(t,16):t;if(e<65536)return o(e);return o(55296+((e-=65536)>>10),56320+(1023&e))},toCodePoint:l},onerror:function(){this.parentNode&&this.parentNode.replaceChild(C(this.alt,!1),this)},parse:function(t,e){e&&"function"!=typeof e||(e={callback:e});return("string"==typeof t?function(t,i){return d(t,function(t){var e,n,r=t,s=S(t),o=i.callback(s,i);if(s&&o){for(n in r="<img ".concat('class="',i.className,'" ','draggable="false" ','alt="',t,'"',' src="',o,'"'),e=i.attributes(t,s))e.hasOwnProperty(n)&&0!==n.indexOf("on")&&-1===r.indexOf(" "+n+"=")&&(r=r.concat(" ",n,'="',e[n].replace(a,u),'"'));r=r.concat("/>")}return r})}:function(t,e){var n,r,s,o,i,a,u,c,d,l,h,f,p,_=function t(e,n){var r,s,o=e.childNodes,i=o.length;for(;i--;)r=o[i],3===(s=r.nodeType)?n.push(r):1!==s||"ownerSVGElement"in r||E.test(r.nodeName.toLowerCase())||t(r,n);return n}(t,[]),g=_.length;for(;g--;){for(s=!1,o=document.createDocumentFragment(),i=_[g],a=i.nodeValue,c=0;u=m.exec(a);){if((d=u.index)!==c&&o.appendChild(C(a.slice(c,d),!0)),h=u[0],f=S(h),c=d+h.length,p=e.callback(f,e),f&&p){for(r in(l=new Image).onerror=e.onerror,l.setAttribute("draggable","false"),n=e.attributes(h,f))n.hasOwnProperty(r)&&0!==r.indexOf("on")&&!l.hasAttribute(r)&&l.setAttribute(r,n[r]);l.className=e.className,l.alt=h,l.src=p,s=!0,o.appendChild(l)}l||o.appendChild(C(h,!1)),l=null}s&&(c<a.length&&o.appendChild(C(a.slice(c),!0)),i.parentNode.replaceChild(o,i))}return t})(t,{callback:e.callback||i,attributes:"function"==typeof e.attributes?e.attributes:c,base:"string"==typeof e.base?e.base:r.base,ext:e.ext||r.ext,size:e.folder||(n=e.size||r.size,"number"==typeof n?n+"x"+n:n),className:e.className||r.className,onerror:e.onerror||r.onerror});var n},replace:d,test:function(t){m.lastIndex=0;var e=m.test(t);return m.lastIndex=0,e}},e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},m=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,n=/\uFE0F/g,s=String.fromCharCode(8205),a=/[&<>'"]/g,E=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,o=String.fromCharCode;return r;function C(t,e){return document.createTextNode(e?t.replace(n,""):t)}function i(t,e){return"".concat(e.base,e.size,"/",t,e.ext)}function S(t){return l(t.indexOf(s)<0?t.replace(n,""):t)}function u(t){return e[t]}function c(){return null}function d(t,e){return String(t).replace(m,e)}function l(t,e){for(var n=[],r=0,s=0,o=0;o<t.length;)r=t.charCodeAt(o++),s?(n.push((65536+(s-55296<<10)+(r-56320)).toString(16)),s=0):55296<=r&&r<=56319?s=r:n.push(r.toString(16));return n.join(e||"-")}}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var s=n(1),o=n(10),r=function(){function t(t,e,n,r){s.isFalsy(t)||(this.jid=t,this.uid=o.getUidFromJid(t),s.isFalsy(r)||(this.priority=r),s.isFalsy(e)||(this.status=e),s.isFalsy(n)||(this.lastActiveAt=n))}return t.prototype.getUid=function(){return this.uid},t.prototype.setUid=function(t){this.uid=t},t.prototype.getJid=function(){return this.jid},t.prototype.setJid=function(t){this.jid=t},t.prototype.getPriority=function(){return this.priority},t.prototype.setPriority=function(t){this.priority=t},t.prototype.getStatus=function(){return this.status},t.prototype.setStatus=function(t){this.status=t},t.prototype.getLastActiveAt=function(){return this.lastActiveAt},t.prototype.setLastActiveAt=function(t){this.lastActiveAt=t},t.prototype.getStatusMessage=function(){return this.statusMessage},t.prototype.setStatusMessage=function(t){this.statusMessage=t},t}();e.UserPresence=r},function(t,e,n){!function(h){"use strict";var n,c,a={}.hasOwnProperty,s=function(t,e){return function(){return t.apply(e,arguments)}};h.Strophe.addConnectionPlugin("muc",{_connection:null,rooms:{},roomNames:[],init:function(t){return this._connection=t,this._muc_handler=null,h.Strophe.addNamespace("MUC_OWNER",h.Strophe.NS.MUC+"#owner"),h.Strophe.addNamespace("MUC_ADMIN",h.Strophe.NS.MUC+"#admin"),h.Strophe.addNamespace("MUC_USER",h.Strophe.NS.MUC+"#user"),h.Strophe.addNamespace("MUC_ROOMCONF",h.Strophe.NS.MUC+"#roomconfig"),h.Strophe.addNamespace("MUC_REGISTER","jabber:iq:register")},join:function(d,t,e,n,r,s,o,i){var a,u,l;return u=this.test_append_nick(d,t),a=h.$pres({from:this._connection.jid,to:u}).c("x",{xmlns:h.Strophe.NS.MUC}),null!=o&&(a=a.c("history",o).up()),null!=s&&a.cnode(h.Strophe.xmlElement("password",[],s)),null!=i&&a.up().cnode(i),null==this._muc_handler&&(this._muc_handler=this._connection.addHandler((l=this,function(t){var e,n,r,s,o,i,a,u,c;if(!(e=t.getAttribute("from")))return!0;if(i=e.split("/")[0],!l.rooms[i])return!0;if(d=l.rooms[i],n={},"message"===t.nodeName)n=d._message_handlers;else if("presence"===t.nodeName&&0<(c=t.getElementsByTagName("x")).length)for(r=0,o=c.length;r<o;r++)if(a=c[r],(u=a.getAttribute("xmlns"))&&u.match(h.Strophe.NS.MUC)){n=d._presence_handlers;break}for(s in n)(0,n[s])(t,d)||delete n[s];return!0}))),this.rooms.hasOwnProperty(d)||(this.rooms[d]=new c(this,d,t,s),n&&this.rooms[d].addHandler("presence",n),e&&this.rooms[d].addHandler("message",e),r&&this.rooms[d].addHandler("roster",r),this.roomNames.push(d)),this._connection.send(a)},leave:function(t,e,n,r){var s,o,i,a;return s=this.roomNames.indexOf(t),delete this.rooms[t],0<=s&&(this.roomNames.splice(s,1),0===this.roomNames.length&&(this._connection.deleteHandler(this._muc_handler),this._muc_handler=null)),a=this.test_append_nick(t,e),i=this._connection.getUniqueId(),o=h.$pres({type:"unavailable",id:i,from:this._connection.jid,to:a}),null!=r&&o.c("status",r),null!=n&&this._connection.addHandler(n,null,"presence",null,i),this._connection.send(o),i},message:function(t,e,n,r,s,o){var i,a,u;return u=this.test_append_nick(t,e),s=s||(null!=e?"chat":"groupchat"),o=o||this._connection.getUniqueId(),(i=h.$msg({to:u,from:this._connection.jid,type:s,id:o}).c("body").t(n)).up(),null!=r&&(i.c("html",{xmlns:h.Strophe.NS.XHTML_IM}).c("body",{xmlns:h.Strophe.NS.XHTML}).h(r),0===i.node.childNodes.length?(a=i.node.parentNode,i.up().up(),i.node.removeChild(a)):i.up().up()),i.c("x",{xmlns:"jabber:x:event"}).c("composing"),this._connection.send(i),o},groupchat:function(t,e,n,r){return this.message(t,null,e,n,void 0,r)},invite:function(t,e,n){var r,s;return s=this._connection.getUniqueId(),r=h.$msg({from:this._connection.jid,to:t,id:s}).c("x",{xmlns:h.Strophe.NS.MUC_USER}).c("invite",{to:e}),null!=n&&r.c("reason",n),this._connection.send(r),s},multipleInvites:function(t,e,n){var r,s,o,i,a;for(i=this._connection.getUniqueId(),s=h.$msg({from:this._connection.jid,to:t,id:i}).c("x",{xmlns:h.Strophe.NS.MUC_USER}),r=0,o=e.length;r<o;r++)a=e[r],s.c("invite",{to:a}),null!=n&&(s.c("reason",n),s.up()),s.up();return this._connection.send(s),i},directInvite:function(t,e,n,r){var s,o,i;return i=this._connection.getUniqueId(),s={xmlns:"jabber:x:conference",jid:t},null!=n&&(s.reason=n),null!=r&&(s.password=r),o=h.$msg({from:this._connection.jid,to:e,id:i}).c("x",s),this._connection.send(o),i},queryOccupants:function(t,e,n){var r,s;return r={xmlns:h.Strophe.NS.DISCO_ITEMS},s=h.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",r),this._connection.sendIQ(s,e,n)},configure:function(t,e,n){var r,s;return r=h.$iq({to:t,type:"get"}).c("query",{xmlns:h.Strophe.NS.MUC_OWNER}),s=r.tree(),this._connection.sendIQ(s,e,n)},cancelConfigure:function(t){var e,n;return e=h.$iq({to:t,type:"set"}).c("query",{xmlns:h.Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"cancel"}),n=e.tree(),this._connection.sendIQ(n)},saveConfiguration:function(t,e,n,r){var s,o,i,a,u;if(i=h.$iq({to:t,type:"set"}).c("query",{xmlns:h.Strophe.NS.MUC_OWNER}),void 0!==h.Strophe.x&&void 0!==h.Strophe.x.Form&&e instanceof h.Strophe.x.Form)e.type="submit",i.cnode(e.toXML());else for(i.c("x",{xmlns:"jabber:x:data",type:"submit"}),o=0,a=e.length;o<a;o++)s=e[o],i.cnode(s).up();return u=i.tree(),this._connection.sendIQ(u,n,r)},createInstantRoom:function(t,e,n){var r;return r=h.$iq({to:t,type:"set"}).c("query",{xmlns:h.Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this._connection.sendIQ(r.tree(),e,n)},createConfiguredRoom:function(t,e,n,r){var s,o,i;for(s in(o=h.$iq({to:t,type:"set"}).c("query",{xmlns:h.Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"})).c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),e)a.call(e,s)&&(i=e[s],o.c("field",{var:s}).c("value").t(i).up().up());return this._connection.sendIQ(o.tree(),n,r)},setTopic:function(t,e){var n;return n=h.$msg({to:t,from:this._connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(e),this._connection.send(n.tree())},_modifyPrivilege:function(t,e,n,r,s){var o;return o=h.$iq({to:t,type:"set"}).c("query",{xmlns:h.Strophe.NS.MUC_ADMIN}).cnode(e.node),null!=n&&o.c("reason",n),this._connection.sendIQ(o.tree(),r,s)},modifyRole:function(t,e,n,r,s,o){var i;return i=h.$build("item",{nick:e,role:n}),this._modifyPrivilege(t,i,r,s,o)},kick:function(t,e,n,r,s){return this.modifyRole(t,e,"none",n,r,s)},voice:function(t,e,n,r,s){return this.modifyRole(t,e,"participant",n,r,s)},mute:function(t,e,n,r,s){return this.modifyRole(t,e,"visitor",n,r,s)},op:function(t,e,n,r,s){return this.modifyRole(t,e,"moderator",n,r,s)},deop:function(t,e,n,r,s){return this.modifyRole(t,e,"participant",n,r,s)},modifyAffiliation:function(t,e,n,r,s,o){var i;return i=h.$build("item",{jid:e,affiliation:n}),this._modifyPrivilege(t,i,r,s,o)},ban:function(t,e,n,r,s){return this.modifyAffiliation(t,e,"outcast",n,r,s)},member:function(t,e,n,r,s){return this.modifyAffiliation(t,e,"member",n,r,s)},revoke:function(t,e,n,r,s){return this.modifyAffiliation(t,e,"none",n,r,s)},owner:function(t,e,n,r,s){return this.modifyAffiliation(t,e,"owner",n,r,s)},admin:function(t,e,n,r,s){return this.modifyAffiliation(t,e,"admin",n,r,s)},changeNick:function(t,e){var n,r;return r=this.test_append_nick(t,e),n=h.$pres({from:this._connection.jid,to:r,id:this._connection.getUniqueId()}),this._connection.send(n.tree())},setStatus:function(t,e,n,r){var s,o;return o=this.test_append_nick(t,e),s=h.$pres({from:this._connection.jid,to:o}),null!=n&&s.c("show",n).up(),null!=r&&s.c("status",r),this._connection.send(s.tree())},registrationRequest:function(t,a,e){var n;return n=h.$iq({to:t,from:this._connection.jid,type:"get"}).c("query",{xmlns:h.Strophe.NS.MUC_REGISTER}),this._connection.sendIQ(n,function(t){var e,n,r,s,o,i;for((n=t.getElementsByTagName("field")).length,s={required:[],optional:[]},o=0,i=n.length;o<i;o++)e=n[o],r={var:e.getAttribute("var"),label:e.getAttribute("label"),type:e.getAttribute("type")},0<e.getElementsByTagName("required").length?s.required.push(r):s.optional.push(r);return a(s)},e)},submitRegistrationForm:function(t,e,n,r){var s,o,i;for(o in(s=h.$iq({to:t,type:"set"}).c("query",{xmlns:h.Strophe.NS.MUC_REGISTER})).c("x",{xmlns:"jabber:x:data",type:"submit"}),s.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#register").up().up(),e)i=e[o],s.c("field",{var:o}).c("value").t(i).up().up();return this._connection.sendIQ(s,n,r)},listRooms:function(t,e,n){var r;return r=h.$iq({to:t,from:this._connection.jid,type:"get"}).c("query",{xmlns:h.Strophe.NS.DISCO_ITEMS}),this._connection.sendIQ(r,e,n)},test_append_nick:function(t,e){var n,r;return r=h.Strophe.escapeNode(h.Strophe.getNodeFromJid(t)),n=h.Strophe.getDomainFromJid(t),r+"@"+n+(null!=e?"/"+e:"")}}),c=function(){function i(t,e,n,r){this.client=t,this.name=e,this.nick=n,this.password=r,this._roomRosterHandler=s(this._roomRosterHandler,this),this._addOccupant=s(this._addOccupant,this),this.roster={},this._message_handlers={},this._presence_handlers={},this._roster_handlers={},this._handler_ids=0,this.client.muc&&(this.client=this.client.muc),this.name=h.Strophe.getBareJidFromJid(this.name),this.addHandler("presence",this._roomRosterHandler)}return i.prototype.join=function(t,e,n){return this.client.join(this.name,this.nick,t,e,n,this.password)},i.prototype.leave=function(t,e){return this.client.leave(this.name,this.nick,t,e),delete this.client.rooms[this.name]},i.prototype.message=function(t,e,n,r){return this.client.message(this.name,t,e,n,r)},i.prototype.groupchat=function(t,e){return this.client.groupchat(this.name,t,e)},i.prototype.invite=function(t,e){return this.client.invite(this.name,t,e)},i.prototype.multipleInvites=function(t,e){return this.client.invite(this.name,t,e)},i.prototype.directInvite=function(t,e){return this.client.directInvite(this.name,t,e,this.password)},i.prototype.configure=function(t){return this.client.configure(this.name,t)},i.prototype.cancelConfigure=function(){return this.client.cancelConfigure(this.name)},i.prototype.saveConfiguration=function(t){return this.client.saveConfiguration(this.name,t)},i.prototype.queryOccupants=function(t,e){return this.client.queryOccupants(this.name,t,e)},i.prototype.setTopic=function(t){return this.client.setTopic(this.name,t)},i.prototype.modifyRole=function(t,e,n,r,s){return this.client.modifyRole(this.name,t,e,n,r,s)},i.prototype.kick=function(t,e,n,r){return this.client.kick(this.name,t,e,n,r)},i.prototype.voice=function(t,e,n,r){return this.client.voice(this.name,t,e,n,r)},i.prototype.mute=function(t,e,n,r){return this.client.mute(this.name,t,e,n,r)},i.prototype.op=function(t,e,n,r){return this.client.op(this.name,t,e,n,r)},i.prototype.deop=function(t,e,n,r){return this.client.deop(this.name,t,e,n,r)},i.prototype.modifyAffiliation=function(t,e,n,r,s){return this.client.modifyAffiliation(this.name,t,e,n,r,s)},i.prototype.ban=function(t,e,n,r){return this.client.ban(this.name,t,e,n,r)},i.prototype.member=function(t,e,n,r){return this.client.member(this.name,t,e,n,r)},i.prototype.revoke=function(t,e,n,r){return this.client.revoke(this.name,t,e,n,r)},i.prototype.owner=function(t,e,n,r){return this.client.owner(this.name,t,e,n,r)},i.prototype.admin=function(t,e,n,r){return this.client.admin(this.name,t,e,n,r)},i.prototype.changeNick=function(t){return this.nick=t,this.client.changeNick(this.name,nick)},i.prototype.setStatus=function(t,e){return this.client.setStatus(this.name,this.nick,t,e)},i.prototype.addHandler=function(t,e){var n;switch(n=this._handler_ids++,t){case"presence":this._presence_handlers[n]=e;break;case"message":this._message_handlers[n]=e;break;case"roster":this._roster_handlers[n]=e;break;default:return this._handler_ids--,null}return n},i.prototype.removeHandler=function(t){return delete this._presence_handlers[t],delete this._message_handlers[t],delete this._roster_handlers[t]},i.prototype._addOccupant=function(t){var e;return e=new n(t,this),this.roster[e.nick]=e},i.prototype._roomRosterHandler=function(t){var e,n,r,s,o;switch(e=i._parsePresence(t),s=e.nick,r=e.newnick||null,e.type){case"error":return!0;case"unavailable":r&&(e.nick=r,this.roster[s]&&this.roster[r]&&(this.roster[s].update(this.roster[r]),this.roster[r]=this.roster[s]),this.roster[s]&&!this.roster[r]&&(this.roster[r]=this.roster[s].update(e))),delete this.roster[s];break;default:this.roster[s]?this.roster[s].update(e):this._addOccupant(e)}for(n in o=this._roster_handlers)(0,o[n])(this.roster,this)||delete this._roster_handlers[n];return!0},i._parsePresence=function(t){var e,n,r,s,o,i,a,u,c,d;for((r={}).nick=h.Strophe.getResourceFromJid(t.getAttribute("from")),r.type=t.getAttribute("type"),r.states=[],u=t.childNodes,s=0,i=u.length;s<i;s++)switch((e=u[s]).nodeName){case"error":r.errorcode=e.getAttribute("code"),r.error=null!=(c=e.childNodes[0])?c.nodeName:void 0;break;case"status":r.status=e.textContent||null;break;case"show":r.show=e.textContent||null;break;case"x":if(e.getAttribute("xmlns")===h.Strophe.NS.MUC_USER)for(d=e.childNodes,o=0,a=d.length;o<a;o++)switch((n=d[o]).nodeName){case"item":r.affiliation=n.getAttribute("affiliation"),r.role=n.getAttribute("role"),r.jid=n.getAttribute("jid"),r.newnick=n.getAttribute("nick");break;case"status":n.getAttribute("code")&&r.states.push(n.getAttribute("code"))}}return r},i}(),function(){function t(t){this.parse=s(this.parse,this),null!=t&&this.parse(t)}t.prototype.parse=function(t){var e,n,r,s,o,i,a,u,c,d,l,h,f;for(h=t.getElementsByTagName("query")[0].childNodes,this.identities=[],this.features=[],this.x=[],o=0,c=h.length;o<c;o++)switch(r=h[o],n=r.attributes,r.nodeName){case"identity":for(i={},a=0,d=n.length;a<d;a++)e=n[a],i[e.name]=e.textContent;this.identities.push(i);break;case"feature":this.features.push(r.getAttribute("var"));break;case"x":if("FORM_TYPE"===!r.childNodes[0].getAttribute("var")||"hidden"===!r.childNodes[0].getAttribute("type"))break;for(f=r.childNodes,u=0,l=f.length;u<l;u++)(s=f[u]).attributes.type||this.x.push({var:s.getAttribute("var"),label:s.getAttribute("label")||"",value:s.firstChild.textContent||""})}return{identities:this.identities,features:this.features,x:this.x}}}(),n=function(){function t(t,e){this.room=e,this.update=s(this.update,this),this.admin=s(this.admin,this),this.owner=s(this.owner,this),this.revoke=s(this.revoke,this),this.member=s(this.member,this),this.ban=s(this.ban,this),this.modifyAffiliation=s(this.modifyAffiliation,this),this.deop=s(this.deop,this),this.op=s(this.op,this),this.mute=s(this.mute,this),this.voice=s(this.voice,this),this.kick=s(this.kick,this),this.modifyRole=s(this.modifyRole,this),this.update(t)}return t.prototype.modifyRole=function(t,e,n,r){return this.room.modifyRole(this.nick,t,e,n,r)},t.prototype.kick=function(t,e,n){return this.room.kick(this.nick,t,e,n)},t.prototype.voice=function(t,e,n){return this.room.voice(this.nick,t,e,n)},t.prototype.mute=function(t,e,n){return this.room.mute(this.nick,t,e,n)},t.prototype.op=function(t,e,n){return this.room.op(this.nick,t,e,n)},t.prototype.deop=function(t,e,n){return this.room.deop(this.nick,t,e,n)},t.prototype.modifyAffiliation=function(t,e,n,r){return this.room.modifyAffiliation(this.jid,t,e,n,r)},t.prototype.ban=function(t,e,n){return this.room.ban(this.jid,t,e,n)},t.prototype.member=function(t,e,n){return this.room.member(this.jid,t,e,n)},t.prototype.revoke=function(t,e,n){return this.room.revoke(this.jid,t,e,n)},t.prototype.owner=function(t,e,n){return this.room.owner(this.jid,t,e,n)},t.prototype.admin=function(t,e,n){return this.room.admin(this.jid,t,e,n)},t.prototype.update=function(t){return this.nick=t.nick||null,this.affiliation=t.affiliation||null,this.role=t.role||null,this.jid=t.jid||null,this.status=t.status||null,this.show=t.show||null,this},t}()}(n(7))},function(t,e,n){var r,s;r=[n(7)],void 0===(s=function(t){var s,o,i;return s=t.Strophe,t.$build,o=t.$iq,t.$msg,t.$pres,i=function(t,e,n){var r=o(e?{type:t,to:e}:{type:t});return r.c("vCard",{xmlns:s.NS.VCARD}),n&&r.cnode(n),r},s.addConnectionPlugin("vcard",{_connection:null,init:function(t){return this._connection=t,s.addNamespace("VCARD","vcard-temp")},get:function(t,e,n){var r=i("get",e);return this._connection.sendIQ(r,t,n)},set:function(t,e,n,r){var s=i("set",n,e);return this._connection.sendIQ(s,t,r)}}),t}.apply(e,r))||(t.exports=s)},function(t,e){Strophe.addConnectionPlugin("receipts",{_conn:null,_msgQueue:{},_retries:{},_resendCount:10,_resendTime:9e3,init:function(t){this._conn=t,Strophe.addNamespace("RECEIPTS","urn:xmpp:receipts")},statusChanged:function(t){if(t===Strophe.Status.CONNECTED||t===Strophe.Status.ATTACHED){var e=this;setTimeout(function(){e.resendQueue()},5e3)}},sendMessage:function(t){var e=this._conn.getUniqueId();t.tree().setAttribute("id",e);var n=Strophe.xmlElement("request",{xmlns:Strophe.NS.RECEIPTS});return t.tree().appendChild(n),this._msgQueue[e]=t,this._retries[e]=0,this._conn.send(t),this.resendMessage(e),e},resendMessage:function(t){var e=this;setTimeout(function(){if(e._msgQueue[t]){if(!e._conn.connected)return void e.resendMessage(t);if(e._retries[t]++,e._retries[t]>e._resendCount)return;e._msgQueue[t].tree().setAttribute("from",e._conn.jid),e._conn.send(e._msgQueue[t]),e.resendMessage(t)}},this._resendTime)},addReceiptHandler:function(e,t,n,r){var s=this;this._conn.addHandler(function(t){return s._processReceipt(t),e(t)},Strophe.NS.RECEIPTS,"message",t,null,n,r)},_processReceipt:function(t){var e=t.getAttribute("id"),n=t.getAttribute("from"),r=t.getElementsByTagName("request"),s=t.getElementsByTagName("received");if(0<r.length){var o=$msg({to:n,from:this._conn.jid,id:this._conn.getUniqueId()}),i=Strophe.xmlElement("received",{xmlns:Strophe.NS.RECEIPTS,id:e});o.tree().appendChild(i),this._conn.send(o)}if(0<s.length){var a=s[0].getAttribute("id");a&&(delete this._msgQueue[a],delete this._retries[a])}},resendQueue:function(){if(this._conn.connected)for(var t in this._msgQueue)this._msgQueue.hasOwnProperty(t)&&this._conn.send(this._msgQueue[t]);else{var e=this;setTimeout(function(){e.resendQueue()},5e3)}},getUnreceivedMsgs:function(){var t=[];for(var e in this._msgQueue)this._msgQueue.hasOwnProperty(e)&&t.push(this._msgQueue[e]);return t},clearMessages:function(){this._msgQueue={}}})},function(t,e,n){"use strict";e.__esModule=!0;var r=n(3),s=n(0),o=n(10),i=function(){function t(){}return t.transformVCard=function(t){var e={};return e[s.UserConstants.NAME]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.NAME)[0])),e[s.UserConstants.UID]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.UID)[0])),e[s.UserConstants.AVATAR]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.AVATAR)[0])),e[s.UserConstants.LINK]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.LINK)[0])),e[s.UserConstants.STATUS]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.STATUS)[0])),e[s.UserConstants.LAST_ACTIVE_AT]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.LAST_ACTIVE_AT)[0])),e[s.UserConstants.ROLE]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.ROLE)[0])),e[s.UserConstants.USER_NAME]=unescape(o.parseHTML(t.getElementsByTagName(s.UserConstants.USER_NAME)[0])),new r.User(e)},t}();e.VCardController=i},function(t,e,n){"use strict";e.__esModule=!0,e.ERRORS={PARAMETER_MISSING:{code:404,name:"MISSING/ INVALID PARAMETER"},NOT_INITIALIZED:{code:-1,name:"INITIALIZATION NOT DONE"}},e.INIT_ERROR={NO_APP_ID:{code:e.ERRORS.PARAMETER_MISSING.code,name:e.ERRORS.PARAMETER_MISSING.name,message:"mandatory parameter appId missing",details:{}}},e.LOGIN_ERROR={NOT_INITIALIZED:{code:"-1",name:"COMETCHAT_INITIALIZATION_NOT_DONE",message:"please initialize the cometchat before using login method",details:{}},UNAUTHORISED:{code:401,name:"USER_NOT_AUTHORISED",message:"provided user is not authorised",details:{}},XMPP_CONNECTION_FAIL:{code:-1,name:"XMPP_CONNECTION_FAIL",message:"XMPP username/password not correct",details:{}}}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(42),s=n(3),o=n(0),i=function(){function t(){}return t.trasformJSONGroupMember=function(t){var e,n;try{e=new r.GroupMember(t[o.GroupMemersConstans.GUID],t[o.GroupMemersConstans.UID]),n=new s.User({uid:t[o.GroupMemersConstans.UID]}),Object.assign(e,t),Object.assign(n,t[o.GroupMemersConstans.USER]),e.setUser(n),t=e}catch(t){}return t},t}();e.GroupMembersController=i},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),s=function(){function t(t,e){this.joinedAt=0,this.isBanned=0,this.guid=t,this.uid=e}return t.prototype.setGuid=function(t){this.guid=t},t.prototype.setUid=function(t){this.uid=t},t.prototype.setScope=function(t){this.scope=t},t.prototype.setJoinedAt=function(t){this.joinedAt=t},t.prototype.setIsBanned=function(t){this.isBanned=t},t.prototype.setUser=function(t){this.user=t},t.prototype.getGuid=function(){return this.guid},t.prototype.getUid=function(){return this.uid},t.prototype.getuser=function(){return this.user},t.prototype.getScope=function(){return this.scope},t.prototype.getJoinedAt=function(){return this.joinedAt},t.prototype.getIsBanned=function(){return this.isBanned},t.GroupMemberScope=r.GroupMemberScope,t}();e.GroupMember=s}])});